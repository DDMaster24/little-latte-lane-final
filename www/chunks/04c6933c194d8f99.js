;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="790b076a-2ab2-c687-7a32-19dfb291f3a6")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,752103,e=>{"use strict";var s=e.i(843476),t=e.i(271645),a=e.i(618566),r=e.i(515288),n=e.i(519455),i=e.i(487486),l=e.i(929592),d=e.i(674675),c=e.i(201928),o=e.i(107233),m=e.i(299023),x=e.i(727612),h=e.i(265056),u=e.i(503116);let g=(0,e.i(475254).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var p=e.i(63209),b=e.i(37727),y=e.i(805109),j=e.i(867838),f=e.i(772436);let N=[{name:"Regina",description:"Ham & Cheese on wood-fired base",smallPrice:42,largePrice:98},{name:"Margarita",description:"Mozzarella & Basil on wood-fired base",smallPrice:35,largePrice:82}],v=[{name:"Salami",smallPrice:10,largePrice:15},{name:"Ham",smallPrice:7,largePrice:12},{name:"Avo",smallPrice:10,largePrice:15},{name:"Pineapple",smallPrice:7,largePrice:12},{name:"Figs",smallPrice:12,largePrice:17},{name:"Olives",smallPrice:8,largePrice:17},{name:"Mushrooms",smallPrice:12,largePrice:17},{name:"Garlic",smallPrice:5,largePrice:10},{name:"Feta",smallPrice:10,largePrice:15}];function w({onAddToCart:e}){let[a,l]=(0,t.useState)(N[0]),[x,h]=(0,t.useState)("small"),[u,g]=(0,t.useState)([]),[p,b]=(0,t.useState)(1),{addItem:y}=(0,d.useCartStore)(),j=(0,t.useCallback)(()=>(("small"===x?a.smallPrice:a.largePrice)+u.reduce((e,s)=>{let t=v.find(e=>e.name===s);return t?e+("small"===x?t.smallPrice:t.largePrice):e},0))*p,[a,x,u,p]),w=e=>"small"===x?e.smallPrice:e.largePrice,C=j();return(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold mb-4 bg-gradient-to-r from-neonCyan via-neonPink to-neonBlue bg-clip-text text-transparent",children:"Build Your Pizza"}),(0,s.jsx)("p",{className:"text-gray-300 text-lg",children:"Create your perfect pizza with our fresh ingredients"})]}),(0,s.jsxs)(r.Card,{className:"bg-gray-800/50 backdrop-blur-sm border-neonBlue/50",children:[(0,s.jsx)(r.CardHeader,{children:(0,s.jsx)(r.CardTitle,{className:"text-neonBlue text-xl",children:"Step 1: Choose Your Pizza"})}),(0,s.jsx)(r.CardContent,{className:"space-y-4",children:N.map(e=>(0,s.jsx)("div",{className:`p-4 rounded-lg border-2 cursor-pointer transition-all ${a?.name===e.name?"border-neonBlue bg-neonBlue/10":"border-gray-600 hover:border-neonBlue/50"}`,onClick:()=>{l(e)},children:(0,s.jsx)("div",{className:"flex justify-between items-center",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-white",children:e.name}),(0,s.jsx)("p",{className:"text-gray-300 text-sm",children:e.description})]})})},e.name))})]}),(0,s.jsxs)(r.Card,{className:"bg-gray-800/50 backdrop-blur-sm border-neonCyan/50",children:[(0,s.jsx)(r.CardHeader,{children:(0,s.jsx)(r.CardTitle,{className:"text-neonCyan text-xl",children:"Step 2: Choose Size"})}),(0,s.jsx)(r.CardContent,{className:"space-y-4",children:(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:["small","large"].map(e=>(0,s.jsx)("div",{className:`p-4 rounded-lg border-2 cursor-pointer transition-all ${x===e?"border-neonCyan bg-neonCyan/10":"border-gray-600 hover:border-neonCyan/50"}`,onClick:()=>{h(e)},children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-white capitalize",children:[e," ","small"===e?"(8-10 inch)":"(12-14 inch)"]}),(0,s.jsxs)("p",{className:"text-neonCyan font-bold text-xl",children:["R",("small"===e?a.smallPrice:a.largePrice).toFixed(2)]})]})},e))})})]}),(0,s.jsxs)(r.Card,{className:"bg-gray-800/50 backdrop-blur-sm border-neonPink/50",children:[(0,s.jsx)(r.CardHeader,{children:(0,s.jsxs)(r.CardTitle,{className:"text-neonPink text-xl",children:["Step 3: Add Toppings",(0,s.jsxs)("span",{className:"text-sm font-normal text-gray-400 ml-2",children:["(",u.length," selected)"]})]})}),(0,s.jsx)(r.CardContent,{className:"space-y-4",children:(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:v.map(e=>{let t=u.includes(e.name),a=w(e);return(0,s.jsx)("div",{className:`p-3 rounded-lg border-2 cursor-pointer transition-all ${t?"border-neonPink bg-neonPink/10":"border-gray-600 hover:border-neonPink/50"}`,onClick:()=>{var s;return s=e.name,void g(e=>e.includes(s)?e.filter(e=>e!==s):[...e,s])},children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-white font-medium",children:e.name}),(0,s.jsxs)(i.Badge,{variant:"outline",className:"border-neonPink text-neonPink",children:["+R",a.toFixed(2)]})]})},e.name)})})})]}),(0,s.jsxs)(r.Card,{className:"bg-gray-800/50 backdrop-blur-sm border-neonCyan/50",children:[(0,s.jsx)(r.CardHeader,{children:(0,s.jsx)(r.CardTitle,{className:"text-neonCyan text-xl",children:"Order Summary"})}),(0,s.jsxs)(r.CardContent,{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsxs)("span",{children:[a.name," Pizza (",x,")"]}),(0,s.jsxs)("span",{children:["R",("small"===x?a.smallPrice:a.largePrice).toFixed(2)]})]}),u.map(e=>{let t=v.find(s=>s.name===e),a=t?w(t):0;return(0,s.jsxs)("div",{className:"flex justify-between text-gray-400",children:[(0,s.jsxs)("span",{children:["+ ",e]}),(0,s.jsxs)("span",{children:["+R",a.toFixed(2)]})]},e)}),p>1&&(0,s.jsxs)("div",{className:"flex justify-between text-gray-400 border-t border-gray-700 pt-2",children:[(0,s.jsxs)("span",{children:["Quantity: ",p]}),(0,s.jsxs)("span",{children:["×",p]})]}),(0,s.jsx)(f.Separator,{className:"border-gray-700"}),(0,s.jsxs)("div",{className:"flex justify-between text-xl font-bold text-neonCyan",children:[(0,s.jsx)("span",{children:"Total:"}),(0,s.jsxs)("span",{children:["R",C.toFixed(2)]})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("span",{className:"text-gray-300",children:"Quantity:"}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(n.Button,{variant:"outline",size:"sm",onClick:()=>b(Math.max(1,p-1)),disabled:p<=1,className:"border-gray-600",children:(0,s.jsx)(m.Minus,{className:"h-4 w-4"})}),(0,s.jsx)("span",{className:"font-semibold text-white w-8 text-center",children:p}),(0,s.jsx)(n.Button,{variant:"outline",size:"sm",onClick:()=>b(p+1),className:"border-gray-600",children:(0,s.jsx)(o.Plus,{className:"h-4 w-4"})})]})]}),(0,s.jsxs)(n.Button,{onClick:()=>{let s=u.length>0?` + ${u.join(", ")}`:"",t=x.charAt(0).toUpperCase()+x.slice(1),r={id:Date.now().toString(),name:`${a.name} Pizza (${t})${s}`,price:j()/p,quantity:p,customization:{pizzaType:a.name,size:x,toppings:u,basePrice:"small"===x?a.smallPrice:a.largePrice,toppingsPrice:u.reduce((e,s)=>{let t=v.find(e=>e.name===s);return e+(t?w(t):0)},0),isCustomized:!0}};e?e(r):y(r)},className:"bg-neonCyan text-black hover:bg-neonCyan/80 font-semibold py-3 px-8",children:[(0,s.jsx)(c.ShoppingCart,{className:"h-5 w-5 mr-2"}),"Add to Cart - R",C.toFixed(2)]})]})]})]})]})}var C=e.i(390464),k=e.i(345262),P=e.i(793479),S=e.i(110204),z=e.i(624687),B=e.i(390676),R=e.i(967489),F=e.i(592930),L=e.i(846696),M=e.i(95187),$=(0,M.createServerReference)("40b21d9835c2aa2c3466a718f02ff5aa3ac965e330",M.callServer,void 0,M.findSourceMapURL,"createOrderServerAction"),A=e.i(531278),_=e.i(561659),T=e.i(98919),q=e.i(482568);let I=(0,q.registerPlugin)("Browser",{web:()=>e.A(463442).then(e=>new e.BrowserWeb)}),E=(0,q.registerPlugin)("App",{web:()=>e.A(806787).then(e=>new e.AppWeb)});function O(){return q.Capacitor.isNativePlatform()}async function D(e){if(O()){let s=await E.addListener("appUrlOpen",async e=>{(e.url.includes("payment=success")||e.url.includes("payment/success")||e.url.includes("payment/cancelled")||e.url.includes("payment/failed"))&&(await I.close(),s.remove())});await I.open({url:e,toolbarColor:"#1A1A1A",presentationStyle:"fullscreen"})}else window.location.href=e}function U({orderId:e,userId:a,amount:r,itemName:i,itemDescription:l,userDetails:d,onPaymentInitiated:c}){let[o,m]=(0,t.useState)(!1),x=async()=>{try{m(!0);let s=await fetch("/api/yoco/checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderId:e,userId:a,amount:r,itemName:i,itemDescription:l,userDetails:d})}),t=await s.json();if(!s.ok)throw Error(t.error||"Failed to create payment session");if(!t.redirectUrl)throw Error("No redirect URL received from payment gateway");c();let n=O()?"native browser":"secure payment";L.toast.success(`Redirecting to ${n}...`),await D(t.redirectUrl)}catch(e){console.error("Payment initiation failed:",e),L.toast.error(e instanceof Error?e.message:"Failed to start payment process")}finally{m(!1)}};return(0,s.jsx)("div",{className:"bg-gradient-to-r from-neonCyan/20 to-neonPink/20 border border-neonCyan/40 rounded-lg p-4 backdrop-blur-md",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"flex items-center justify-center w-10 h-10 bg-neonCyan/20 rounded-lg",children:(0,s.jsx)(_.CreditCard,{className:"w-5 h-5 text-neonCyan"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-white text-lg font-semibold",children:"Secure Payment"}),(0,s.jsx)("p",{className:"text-gray-300 text-sm",children:"Powered by Yoco"})]})]}),(0,s.jsxs)("div",{className:"bg-darkBg/30 border border-neonPink/30 rounded p-3",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,s.jsx)("span",{className:"text-white font-medium",children:"Total Amount"}),(0,s.jsxs)("span",{className:"text-neonCyan text-xl font-bold",children:["R",r.toFixed(2)]})]}),(0,s.jsx)("p",{className:"text-gray-300 text-sm",children:l})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[(0,s.jsx)(T.Shield,{className:"w-4 h-4 text-neonCyan"}),(0,s.jsx)("span",{children:"Secure 256-bit SSL encryption"})]}),(0,s.jsx)(n.Button,{onClick:x,disabled:o,className:"w-full bg-gradient-to-r from-neonCyan to-neonPink hover:from-neonCyan/80 hover:to-neonPink/80 text-darkBg font-semibold py-3 h-auto transition-all duration-300",children:o?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(A.Loader2,{className:"w-5 h-5 mr-2 animate-spin"}),"Creating secure payment..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(_.CreditCard,{className:"w-5 h-5 mr-2"}),"Pay R",r.toFixed(2)," with Card"]})}),(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)("p",{className:"text-gray-400 text-xs",children:"We accept Visa, Mastercard, and other major cards"})})]})})}function Y(e){if(!e)return null;let s=e.replace(/\D/g,""),t="";if(s.startsWith("27"))t=s;else if(s.startsWith("0"))t="27"+s.substring(1);else{if(9!==s.length)return null;t="27"+s}return/^27[6-8]\d{8}$/.test(t)?t:null}function H(e){return null!==Y(e)}function W(e){let s=Y(e);return s?`+${s.substring(0,2)} ${s.substring(2,4)} ${s.substring(4,7)} ${s.substring(7)}`:e}var V=e.i(602041),Q=e.i(257428);function X({isOpen:e,onClose:i}){let l=(0,d.useCartStore)(e=>e.items),h=(0,d.useCartStore)(e=>e.clearCart),u=(0,d.useCartStore)(e=>e.updateQuantity),p=(0,d.useCartStore)(e=>e.removeItem),b=(0,d.useCartStore)(e=>e.total()),{user:y,profile:j}=(0,C.useAuth)(),{isClosed:f,message:N}=(0,k.useRestaurantClosure)(),v=(0,a.useRouter)(),[w,M]=(0,t.useState)("delivery"),[A,_]=(0,t.useState)((0,V.parseAddressString)(null)),[T,q]=(0,t.useState)(""),[I,E]=(0,t.useState)(""),[O,D]=(0,t.useState)(!1),[X,J]=(0,t.useState)(!1),[K,G]=(0,t.useState)(null),[Z,ee]=(0,t.useState)(null),[es,et]=(0,t.useState)(!1),[ea,er]=(0,t.useState)("cart"),[en,ei]=(0,t.useState)(!1),[el,ed]=(0,t.useState)([]);(0,t.useEffect)(()=>{if(j&&!en){let e=[];if(j.phone&&j.phone.trim()&&(q(j.phone),e.push("phone number")),j.address&&j.address.trim()){let s=(0,V.parseAddressString)(j.address);_(s),D(s.isRobertsEstateResident),e.push("delivery address")}j.full_name&&j.full_name.trim()&&e.push("name"),e.length>0&&ei(!0),ei(!0)}},[j,en]),(0,t.useEffect)(()=>{j||(_((0,V.parseAddressString)(null)),q(""),M("delivery"),D(!1),J(!1),ei(!1))},[j]);let ec=O?10:30,eo=b+("delivery"===w?ec:0);(0,t.useEffect)(()=>{(async()=>{if(y&&e&&!(l.length>0))try{let e=(0,B.getSupabaseClient)(),{data:s,error:t}=await e.from("orders").select(`
            id,
            order_number,
            total_amount,
            created_at,
            order_items (
              quantity,
              price,
              menu_items (name)
            )
          `).eq("user_id",y.id).in("status",["draft","pending"]).order("created_at",{ascending:!1}).limit(3);if(t)throw t;ed(s||[])}catch(e){console.error("Failed to fetch draft orders:",e)}})()},[y,e,l.length]);let em=async()=>{if(f)return void L.toast.error(N||"Restaurant is currently closed. Please try again later.");if(!j)return void L.toast.error("Please log in to checkout");if(0===l.length)return void L.toast.error("Cart is empty");if("delivery"===w){if(!j?.address&&!A.fullAddress.trim())return void L.toast.error("Please set up your delivery address");if(!O)return void L.toast.error("Please confirm you are a Roberts Estate resident");if(!X)return void L.toast.error("Please confirm your address is correct")}if(!T.trim())return void L.toast.error("Please enter a phone number");if(!H(T))return void L.toast.error("Please enter a valid South African phone number");if(!Y(T))return void L.toast.error("Invalid phone number format");if(K)return void L.toast.info("Order already created, proceeding to payment...");et(!0);let e=["Validating order details...","Creating your order...","Processing payment setup...","Preparing checkout..."],s=0;L.toast.loading(e[s],{id:"create-order"});try{await new Promise(e=>setTimeout(e,500)),s=1,L.toast.loading(e[s],{id:"create-order"});let t=l.map(e=>({id:e.id,quantity:e.quantity,price:e.price,name:e.name,customization:e.customization}));await new Promise(e=>setTimeout(e,300)),s=2,L.toast.loading(e[s],{id:"create-order"});let a=await $({userId:j.id,items:t,total:eo,deliveryType:w,deliveryAddress:"delivery"===w?(0,V.serializeAddress)(A):void 0,delivery_fee:"delivery"===w?ec:null,delivery_zone:"delivery"===w&&O?"roberts_estate":"middleburg",delivery_coordinates:null,address_verified:!1,specialInstructions:I.trim()||void 0});if(s=3,L.toast.loading(e[s],{id:"create-order"}),await new Promise(e=>setTimeout(e,200)),a.success&&a.orderId){G(a.orderId);try{let e=(0,B.getSupabaseClient)(),{data:s,error:t}=await e.from("orders").select(`
              id,
              order_number,
              total_amount,
              order_items (
                quantity,
                price,
                menu_items (name)
              )
            `).eq("id",a.orderId).single();if(t)throw t;s&&ee({id:s.id,order_number:s.order_number,total_amount:s.total_amount||b,items:s.order_items.map(e=>({name:e.menu_items?.name||"Unknown Item",quantity:e.quantity,price:e.price}))})}catch(e){console.error("Error fetching order details:",e),ee({id:a.orderId,order_number:null,total_amount:b,items:l.map(e=>({name:e.name,quantity:e.quantity,price:e.price}))})}L.toast.success("✅ Order ready for payment!",{id:"create-order",duration:2e3})}else L.toast.error("❌ Error creating order: "+(a.error||"Unknown error"),{id:"create-order"})}catch(e){console.error("Exception in handleCreateOrder:",e),L.toast.error("Failed to create order: "+(e instanceof Error?e.message:"Unknown error"),{id:"create-order"})}finally{et(!1)}};return(0,s.jsxs)(s.Fragment,{children:[e&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40",onClick:i}),(0,s.jsx)("div",{className:`
        fixed right-0 top-0 h-full w-full max-w-md bg-darkBg/95 backdrop-blur-xl border-l border-neonCyan/50
        transform transition-transform duration-300 ease-in-out z-50
        ${e?"translate-x-0":"translate-x-full"}
      `,style:{paddingTop:"env(safe-area-inset-top)"},children:(0,s.jsxs)("div",{className:"flex flex-col h-full",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-neonCyan/30 bg-darkBg",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(c.ShoppingCart,{className:"h-5 w-5 text-neonCyan"}),(0,s.jsx)("h2",{className:"text-neonCyan font-semibold text-lg",children:"cart"===ea?"Your Order":K?"Payment":"Checkout Details"})]}),(0,s.jsx)(n.Button,{variant:"ghost",size:"sm",onClick:()=>{"cart"===ea?i():er("cart")},className:"text-gray-400 hover:text-white hover:bg-gray-700/50 px-3 py-2 text-xs whitespace-nowrap",children:"cart"===ea?"Back to Menu":"Back to Cart"})]}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto p-4",children:["cart"===ea&&(0,s.jsx)("div",{className:"space-y-4",children:0===l.length?(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)(c.ShoppingCart,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-400",children:"Your cart is empty"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Add items from the menu to get started"}),el.length>0&&(0,s.jsxs)("div",{className:"mt-6 p-4 bg-yellow-900/20 border border-yellow-500/30 rounded-lg",children:[(0,s.jsxs)("p",{className:"text-yellow-400 font-medium mb-3",children:["📋 You have ",el.length," draft order",el.length>1?"s":""]}),(0,s.jsx)("p",{className:"text-sm text-gray-300 mb-4",children:"Would you like to continue with a previous order?"}),(0,s.jsx)("div",{className:"space-y-2",children:el.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-800 rounded-lg",children:[(0,s.jsxs)("div",{className:"text-left",children:[(0,s.jsxs)("p",{className:"text-white text-sm font-medium",children:["Order #",e.order_number||e.id.slice(-6)]}),(0,s.jsxs)("p",{className:"text-xs text-gray-400",children:["R",(e.total_amount||0).toFixed(2)," • ",e.created_at?new Date(e.created_at).toLocaleDateString():"N/A"]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(n.Button,{size:"sm",onClick:async()=>{try{let s=await fetch("/api/orders/retry",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderId:e.id,userId:y?.id})}),t=await s.json();t.success&&t.orderItems?(d.useCartStore.getState().loadOrderToCart(t.orderItems),L.toast.success("Draft order loaded!"),ed([])):L.toast.error("Failed to load order")}catch(e){console.error("Load order error:",e),L.toast.error("Failed to load order")}},className:"bg-green-600 hover:bg-green-700 text-white text-xs",children:"Continue"}),(0,s.jsx)(n.Button,{size:"sm",variant:"outline",onClick:()=>{v.push("/account?tab=drafts"),i()},className:"border-gray-500 text-gray-300 text-xs",children:"View All"})]})]},e.id))})]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"space-y-3",children:l.map(e=>(0,s.jsx)(r.Card,{className:"bg-darkBg/60 backdrop-blur-md border-neonPink/40",children:(0,s.jsxs)(r.CardContent,{className:"p-3",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h4",{className:"text-neonCyan font-medium text-sm",children:e.name}),(0,s.jsxs)("p",{className:"text-neonPink text-sm",children:["R",e.price]})]}),(0,s.jsx)(n.Button,{variant:"ghost",size:"sm",onClick:()=>p(e.id),className:"text-red-400 hover:text-red-300 p-1",children:(0,s.jsx)(x.Trash2,{className:"h-4 w-4"})})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(n.Button,{variant:"outline",size:"sm",onClick:()=>u(e.id,Math.max(1,e.quantity-1)),className:"h-6 w-6 p-0 border-neonPink/50 text-neonPink",children:(0,s.jsx)(m.Minus,{className:"h-3 w-3"})}),(0,s.jsx)("span",{className:"text-neonPink text-sm w-8 text-center",children:e.quantity}),(0,s.jsx)(n.Button,{variant:"outline",size:"sm",onClick:()=>u(e.id,e.quantity+1),className:"h-6 w-6 p-0 border-neonPink/50 text-neonPink",children:(0,s.jsx)(o.Plus,{className:"h-3 w-3"})})]}),(0,s.jsxs)("span",{className:"text-neonCyan font-semibold text-sm",children:["R",(e.price*e.quantity).toFixed(2)]})]})]})},e.id))}),(0,s.jsxs)("div",{className:"border-t border-neonCyan/30 pt-4 pb-safe-bottom",children:[(0,s.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-white",children:"Subtotal:"}),(0,s.jsxs)("span",{className:"text-white",children:["R",b.toFixed(2)]})]}),"delivery"===w&&(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("span",{className:"text-gray-300",children:["Delivery Fee ",O?"(Roberts Estate)":"(Middleburg)",":"]}),(0,s.jsxs)("span",{className:"text-neonCyan",children:["R",ec.toFixed(2)]})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center border-t border-gray-600 pt-2",children:[(0,s.jsx)("span",{className:"text-lg font-semibold text-white",children:"Total:"}),(0,s.jsxs)("span",{className:"text-xl font-bold text-neonCyan",children:["R",eo.toFixed(2)]})]})]}),f&&(0,s.jsxs)("div",{className:"bg-red-600/20 border border-red-600 rounded-lg p-3 mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-red-400",children:[(0,s.jsx)("span",{children:"🔒"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"Restaurant Closed"})]}),(0,s.jsx)("p",{className:"text-red-300 text-sm mt-1",children:N||"We are currently closed. Please try again later."})]}),(0,s.jsx)(n.Button,{onClick:()=>er("checkout"),className:"w-full neon-button",disabled:0===l.length||f,children:f?"Restaurant Closed":"Proceed to Checkout"})]})]})}),"checkout"===ea&&(0,s.jsx)("div",{className:"space-y-4",children:K?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"bg-gradient-to-r from-neonCyan/20 to-neonPink/20 border border-neonCyan/40 rounded-lg p-4 backdrop-blur-md",children:[(0,s.jsx)("h3",{className:"text-neonCyan font-bold text-lg mb-3 flex items-center gap-2",children:"💳 Payment"}),(0,s.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-300",children:"Order:"}),(0,s.jsxs)("span",{className:"text-white font-medium",children:["#",Z?.order_number||K.slice(-8)]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-300",children:"Total:"}),(0,s.jsxs)("span",{className:"text-neonPink font-bold text-lg",children:["R",Z?.total_amount?.toFixed(2)||b.toFixed(2)]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-300",children:"Type:"}),(0,s.jsx)("span",{className:"text-white",children:"delivery"===w?"🚚 Delivery":"🏪 Pickup"})]}),"delivery"===w&&A.fullAddress&&(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-300",children:"Address:"}),(0,s.jsx)("span",{className:"text-white text-right flex-1 ml-2",children:(0,V.formatAddressForDisplay)(A)})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-300",children:"Phone:"}),(0,s.jsx)("span",{className:"text-white",children:W(T)})]})]}),Z?.items&&Z.items.length>0&&(0,s.jsxs)("div",{className:"mt-4 pt-3 border-t border-neonCyan/30",children:[(0,s.jsx)("p",{className:"text-white font-medium text-sm mb-2",children:"Order Items:"}),(0,s.jsx)("div",{className:"space-y-1",children:Z.items.map((e,t)=>(0,s.jsxs)("div",{className:"text-xs text-gray-300 flex justify-between",children:[(0,s.jsxs)("span",{children:[e.quantity,"x ",e.name]}),(0,s.jsxs)("span",{children:["R",e.price.toFixed(2)]})]},t))})]})]}),(0,s.jsx)("div",{className:"bg-neonPink/10 border border-neonPink/30 rounded-lg p-3 backdrop-blur-md",children:(0,s.jsx)("p",{className:"text-neonPink text-sm text-center",children:"🔒 Secure payment powered by Yoco"})}),(0,s.jsx)(U,{orderId:K,userId:j?.id||"",amount:eo,itemName:0===l.length?"Little Latte Lane Order":1===l.length?l[0].name:`Little Latte Lane Order (${l.length} items)`,itemDescription:(()=>{if(0===l.length)return"Little Latte Lane Order";if(1===l.length){let e=l[0];return`${e.name} x${e.quantity}${e.customization?" (Customized)":""}`}if(l.length<=3)return l.map(e=>`${e.name} x${e.quantity}`).join(", ");let e=l[0];return`${l.length} items: ${e.name}${l.length>1?" & more":""}`})(),userDetails:{email:y?.email||"customer@example.com",firstName:j?.full_name?.split(" ")[0]||"Customer",lastName:j?.full_name?.split(" ").slice(1).join(" ")||"User",phone:Y(T)||T,deliveryType:w,deliveryAddress:"delivery"===w?(0,V.serializeAddress)(A):void 0},onPaymentInitiated:()=>{h(),er("cart"),G(null),E(""),i(),L.toast.success("Payment initiated! Redirecting to payment gateway...")}}),(0,s.jsxs)("div",{className:"flex gap-2 pb-safe-bottom",children:[(0,s.jsx)(n.Button,{onClick:()=>er("cart"),variant:"outline",className:"flex-1 border-neonPink/50 text-neonPink hover:bg-neonPink/10 text-sm",children:"Back to Cart"}),(0,s.jsx)(n.Button,{onClick:()=>{G(null)},variant:"outline",className:"flex-1 border-red-400/50 text-red-400 hover:bg-red-400/10 text-sm",children:"Cancel Order"})]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"bg-gradient-to-r from-neonCyan/20 to-neonPink/20 border border-neonCyan/40 rounded-lg p-4 backdrop-blur-md",children:[(0,s.jsx)("h3",{className:"text-neonCyan font-bold text-lg mb-3 flex items-center gap-2",children:"📋 Checkout Details"}),(0,s.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-300",children:"Items:"}),(0,s.jsxs)("span",{className:"text-white",children:[l.length," item",l.length>1?"s":""]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-300",children:"Subtotal:"}),(0,s.jsxs)("span",{className:"text-white",children:["R",b.toFixed(2)]})]}),"delivery"===w&&(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsxs)("span",{className:"text-gray-300",children:["Delivery Fee ",O?"(Roberts Estate)":"(Middleburg)",":"]}),(0,s.jsxs)("span",{className:"text-neonCyan",children:["R",ec.toFixed(2)]})]}),(0,s.jsxs)("div",{className:"flex justify-between border-t border-gray-600 pt-2",children:[(0,s.jsx)("span",{className:"text-gray-300 font-semibold",children:"Total:"}),(0,s.jsxs)("span",{className:"text-neonPink font-bold text-lg",children:["R",eo.toFixed(2)]})]})]}),(0,s.jsxs)("div",{className:"mt-3 pt-3 border-t border-neonCyan/30",children:[(0,s.jsx)("p",{className:"text-white font-medium text-sm mb-2",children:"Your Order:"}),(0,s.jsx)("div",{className:"space-y-1 max-h-24 overflow-y-auto",children:l.map(e=>(0,s.jsxs)("div",{className:"text-xs text-gray-300 flex justify-between",children:[(0,s.jsxs)("span",{children:[e.quantity,"x ",e.name]}),(0,s.jsxs)("span",{children:["R",(e.price*e.quantity).toFixed(2)]})]},e.id))})]}),(j?.phone||j?.full_name)&&(0,s.jsx)("div",{className:"mt-3 pt-2 border-t border-neonCyan/30",children:(0,s.jsxs)("p",{className:"text-xs text-neonCyan/80 flex items-center gap-1",children:["✨ Using your saved profile details",(0,s.jsx)("button",{onClick:()=>{i(),v.push("/account")},className:"text-neonPink hover:text-neonCyan underline ml-1",children:"(update)"})]})})]}),(0,s.jsx)("form",{autoComplete:"off",onSubmit:e=>e.preventDefault(),"data-form-type":"checkout",children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-gray-800/50 backdrop-blur-sm rounded-lg p-4 space-y-4",children:[(0,s.jsx)("h3",{className:"text-white font-medium text-sm",children:"Contact Information"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(S.Label,{className:"text-gray-300 text-sm",children:"Delivery Type *"}),(0,s.jsxs)(R.Select,{value:w,onValueChange:e=>M(e),children:[(0,s.jsx)(R.SelectTrigger,{className:"bg-gray-700/50 border-gray-600 text-white focus:border-neonCyan focus:ring-1 focus:ring-neonCyan/20 mt-1",children:(0,s.jsx)(R.SelectValue,{})}),(0,s.jsxs)(R.SelectContent,{className:"bg-gray-800 border-gray-600",children:[(0,s.jsx)(R.SelectItem,{value:"delivery",children:"🚚 Delivery"}),(0,s.jsx)(R.SelectItem,{value:"pickup",children:"🏪 Pickup"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)(S.Label,{htmlFor:"contact-number",className:"text-gray-300 text-sm flex items-center gap-1",children:["Phone Number *",j?.phone&&(0,s.jsx)("span",{className:"text-xs text-neonCyan/60",children:"(from profile)"})]}),(0,s.jsx)(P.Input,{id:"contact-number",name:"contact_number",type:"tel",value:T,onChange:e=>q(e.target.value),className:"bg-gray-700/50 border-gray-600 text-white placeholder:text-gray-400 focus:border-neonCyan focus:ring-1 focus:ring-neonCyan/20 mt-1",placeholder:j?.phone?"Your saved phone number":"082 345 6789",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false","data-form-type":"other","data-lpignore":"true",required:!0}),T&&H(T)&&(0,s.jsxs)("p",{className:"text-neonCyan text-xs mt-1",children:["✓ ",W(T)]}),T&&!H(T)&&T.length>5&&(0,s.jsx)("p",{className:"text-red-400 text-xs mt-1",children:"Please enter a valid SA phone number"})]})]})]}),"delivery"===w&&(0,s.jsxs)("div",{className:"bg-gray-800/50 backdrop-blur-sm rounded-lg p-4 space-y-4",children:[(0,s.jsx)("h3",{className:"text-white font-medium text-sm",children:"Delivery Address"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"bg-gray-700/30 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex items-start gap-3 flex-1",children:[(0,s.jsx)(g,{className:"h-5 w-5 text-green-400 mt-0.5 flex-shrink-0"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm text-gray-400 mb-1",children:"Address Preview"}),(0,s.jsx)("p",{className:"text-white font-medium leading-relaxed text-sm",children:j?.address?(0,V.formatAddressForDisplay)((0,V.parseAddressString)(j.address)):A.fullAddress||"No address set"})]})]}),(0,s.jsxs)(n.Button,{type:"button",size:"sm",variant:"outline",onClick:()=>{L.toast.info("Redirecting to profile to update address..."),i(),v.push("/account?tab=profile")},className:"border-gray-600 text-gray-300 hover:bg-gray-600/50 hover:border-gray-500 ml-3 text-xs",title:"Update address on profile page",children:[(0,s.jsx)(F.Edit2,{className:"h-3 w-3 mr-1"}),"Edit"]})]})}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(Q.Checkbox,{id:"roberts-estate-resident",checked:O,onCheckedChange:e=>D(!0===e),className:"border-gray-500 data-[state=checked]:bg-neonCyan data-[state=checked]:border-neonCyan"}),(0,s.jsx)(S.Label,{htmlFor:"roberts-estate-resident",className:"text-gray-300 text-sm cursor-pointer",children:"I confirm I am a Roberts Estate resident"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(Q.Checkbox,{id:"address-correct",checked:X,onCheckedChange:e=>J(!0===e),className:"border-gray-500 data-[state=checked]:bg-neonCyan data-[state=checked]:border-neonCyan"}),(0,s.jsx)(S.Label,{htmlFor:"address-correct",className:"text-gray-300 text-sm cursor-pointer",children:"I confirm my address is correct"})]})]})]})]}),(0,s.jsxs)("div",{className:"bg-gray-800/50 backdrop-blur-sm rounded-lg p-4",children:[(0,s.jsx)("h3",{className:"text-white font-medium text-sm mb-3",children:"Special Instructions"}),(0,s.jsxs)("div",{children:[(0,s.jsx)(z.Textarea,{id:"special-instructions",name:"special_instructions",value:I,onChange:e=>E(e.target.value),className:"bg-gray-700/50 border-gray-600 text-white placeholder:text-gray-400 focus:border-neonCyan focus:ring-1 focus:ring-neonCyan/20 min-h-[80px] text-sm",placeholder:"Any special requests or dietary requirements...",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false","data-form-type":"other","data-lpignore":"true",rows:3}),(0,s.jsx)("p",{className:"text-xs text-gray-400 mt-2",children:"Optional: Add any special instructions for your order"})]})]})]})}),(0,s.jsx)("div",{className:"mt-6 pb-safe-bottom",children:(0,s.jsx)(n.Button,{onClick:em,disabled:es||f,className:"w-full bg-gradient-to-r from-neonCyan to-neonPink hover:from-neonCyan/90 hover:to-neonPink/90 text-black font-medium py-3 text-base shadow-lg hover:shadow-xl transition-all duration-200",children:f?"Restaurant Closed":es?"Creating Order...":"Proceed to Payment"})})]})})]})]})})]})}function J(e){for(let s of[/^(.+?)\s+(Regular|Large|Small|Medium|R|L|S|M)$/i,/^(.+?)\s+(Reg|Lrg|Sm|Med)$/i,/^(.+?)\s+\((Regular|Large|Small|Medium|R|L|S|M)\)$/i,/^(.+?)\s+-\s+(Regular|Large|Small|Medium|R|L|S|M)$/i]){let t=e.match(s);if(t)return{baseName:t[1].trim(),size:t[2].trim()}}return{baseName:e.trim(),size:"Regular"}}function K(e){let s=new Map;e.forEach(e=>{if(!e.name)return;let{baseName:t}=J(e.name),a=t.toLowerCase();s.has(a)||s.set(a,[]),s.get(a).push(e)});let t=[];return s.forEach((e,s)=>{if(0===e.length)return;let a=["Small","S","Sm","Regular","R","Reg","Medium","M","Med","Large","L","Lrg"];e.sort((e,s)=>{let t=J(e.name||"").size,r=J(s.name||"").size,n=a.indexOf(t),i=a.indexOf(r);return(-1===n?999:n)-(-1===i?999:i)});let r=e[0],{baseName:n}=J(r.name||""),i=e.map(e=>{let{size:s}=J(e.name||"");return{id:e.id,name:e.name||"",price:e.price||0,size:({R:"Regular",L:"Large",S:"Small",M:"Medium",Reg:"Regular",Lrg:"Large",Sm:"Small",Med:"Medium"})[s]||s,originalItem:e}}),l={id:r.id,baseName:n,description:r.description,category_id:r.category_id,variants:i,hasMultipleSizes:i.length>1,originalItem:1===i.length?r:void 0};t.push(l)}),t}function G(e,s){return e.hasMultipleSizes&&!s}function Z(e,s){return e.variants.find(e=>e.size===s)||null}function ee(e){return e.variants[0]?.size||"Regular"}function es(){let[e,f]=(0,t.useState)(null),[N,v]=(0,t.useState)(!1),[C,k]=(0,t.useState)({}),[P,S]=(0,t.useState)(null),[z,B]=(0,t.useState)(!1),R=(0,a.useSearchParams)(),F=(0,a.useRouter)(),L=R.get("category"),M=R.get("payment"),$=R.get("payment_id"),A=R.get("reason"),{categories:_,menuItems:T,loading:q,error:I,refetch:E}=(0,y.useMenu)(),O=(0,t.useMemo)(()=>_.filter(e=>{let s=e.name.toLowerCase();return!(s.includes("pizza add")||s.includes("add-on")||s.includes("add on")||s.includes("addon"))}).sort((e,s)=>e.name.localeCompare(s.name)),[_]),{items:D,addItem:U,updateQuantity:Y,removeItem:H,total:W,clearCart:V}=(0,d.useCartStore)();(0,t.useEffect)(()=>{if("success"===M){B(!0),S({type:"success",message:`Payment successful! ${$?`Payment ID: ${$}`:"Your order has been confirmed."}`}),V();{let e=new URL(window.location.href);e.searchParams.delete("payment"),e.searchParams.delete("payment_id"),window.history.replaceState({},"",e.pathname+e.search)}let e=setTimeout(()=>{S(null),B(!1)},5e3);return()=>clearTimeout(e)}if("error"===M){B(!0),S({type:"error",message:`Payment failed. ${A?`Reason: ${A.replace(/_/g," ")}`:"Please try again."}`});{let e=new URL(window.location.href);e.searchParams.delete("payment"),e.searchParams.delete("reason"),window.history.replaceState({},"",e.pathname+e.search)}let e=setTimeout(()=>{S(null),B(!1)},7e3);return()=>clearTimeout(e)}},[M,$,A,V]),(0,t.useEffect)(()=>{q||0===O.length||(L&&O.some(e=>e.id===L)?f(L):!e&&O.length>0&&f(O[0].id))},[L,O,q,e]);let Q=(0,t.useCallback)(e=>{f(e),F.push(`/ordering?category=${e}`,{scroll:!1})},[F]),J=(0,t.useMemo)(()=>e&&0!==T.length?K(T.filter(s=>s.category_id===e)):[],[e,T]),es=(0,t.useMemo)(()=>O.find(s=>s.id===e)?.name||"Menu",[O,e]),et=(0,t.useMemo)(()=>es.toLowerCase().includes("pizza"),[es]),ea=(0,t.useCallback)(e=>T.filter(s=>s.category_id===e).length,[T]),er=(e,s)=>{s<=0?H(e):Y(e,s)};return q&&!z?(0,s.jsx)("div",{className:"min-h-screen bg-darkBg",children:(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsxs)("div",{className:"w-64 bg-gray-900 border-r border-gray-700 p-4",children:[(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsx)("div",{className:"w-32 h-6 bg-gradient-to-r from-neonCyan/30 to-neonPink/30 rounded shimmer"})}),(0,s.jsx)(j.CategorySkeleton,{count:8})]}),(0,s.jsxs)("div",{className:"flex-1 p-6",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("div",{className:"w-48 h-8 bg-gradient-to-r from-gray-700 via-gray-600 to-gray-700 rounded shimmer"}),(0,s.jsx)("div",{className:"w-32 h-4 bg-gray-700 rounded shimmer mt-2"})]}),(0,s.jsx)(j.MenuItemSkeleton,{count:6})]}),(0,s.jsx)("div",{className:"w-80 bg-gray-900 border-l border-gray-700 p-4",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{className:"w-20 h-6 bg-gradient-to-r from-neonCyan/30 to-neonPink/30 rounded shimmer"}),(0,s.jsx)("div",{className:"w-8 h-8 bg-gray-700 rounded-full shimmer"})]}),Array.from({length:3}).map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/30 rounded-lg animate-pulse",style:{animationDelay:`${.1*t}s`},children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-gray-700 rounded shimmer"}),(0,s.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,s.jsx)("div",{className:"w-3/4 h-4 bg-gray-700 rounded shimmer"}),(0,s.jsx)("div",{className:"w-1/2 h-3 bg-gray-700 rounded shimmer"})]}),(0,s.jsx)("div",{className:"w-16 h-6 bg-gray-700 rounded shimmer"})]},t)),(0,s.jsxs)("div",{className:"border-t border-gray-700 pt-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("div",{className:"w-12 h-6 bg-gray-700 rounded shimmer"}),(0,s.jsx)("div",{className:"w-20 h-8 bg-gradient-to-r from-neonCyan/30 to-neonPink/30 rounded shimmer"})]}),(0,s.jsx)("div",{className:"w-full h-12 bg-gradient-to-r from-neonCyan/20 to-neonPink/20 rounded-lg shimmer"})]})]})})]})}):I?(0,s.jsx)("div",{className:"min-h-screen bg-darkBg",children:(0,s.jsx)(j.ErrorState,{title:"Menu Temporarily Unavailable",message:`We're having trouble loading the menu. ${I}`,onRetry:E,className:"min-h-screen"})}):(0,s.jsxs)("div",{className:"min-h-screen bg-darkBg",children:[P&&(0,s.jsx)("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-50 w-full max-w-md",children:(0,s.jsxs)(l.Alert,{className:`${"success"===P.type?"bg-green-900/90 border-green-500 text-green-100":"bg-red-900/90 border-red-500 text-red-100"} backdrop-blur-sm`,children:["success"===P.type?(0,s.jsx)(g,{className:"h-4 w-4"}):(0,s.jsx)(p.AlertCircle,{className:"h-4 w-4"}),(0,s.jsxs)(l.AlertDescription,{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{children:P.message}),(0,s.jsx)("button",{onClick:()=>S(null),className:"ml-2 hover:opacity-70",children:(0,s.jsx)(b.X,{className:"h-4 w-4"})})]})]})}),(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("div",{className:"w-64 bg-gray-900 border-r border-gray-700 min-h-screen",children:(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsxs)("h2",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[(0,s.jsx)(h.ChefHat,{className:"h-5 w-5 text-neonCyan"}),"Categories"]}),(0,s.jsx)("div",{className:"space-y-2",children:O.map(t=>(0,s.jsx)("button",{onClick:()=>Q(t.id),className:`w-full text-left p-3 rounded-lg transition-all duration-200 ${e===t.id?"bg-neonCyan text-black font-semibold shadow-lg":"bg-gray-800 text-gray-300 hover:bg-gray-700 hover:text-white"}`,children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{children:t.name}),(0,s.jsx)(i.Badge,{variant:"secondary",className:"bg-gray-600 text-gray-200 text-xs",children:ea(t.id)})]})},t.id))})]})}),(0,s.jsxs)("div",{className:"flex-1 p-6",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold bg-neon-gradient bg-clip-text text-transparent",children:es}),!et&&(0,s.jsxs)("p",{className:"text-gray-400 mt-1",children:[J.length," items available"]})]}),et?(0,s.jsx)(w,{}):(0,s.jsx)(s.Fragment,{children:0===J.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(u.Clock,{className:"h-12 w-12 text-gray-500 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-400",children:"No items available in this category"})]}):(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:J.map(e=>{var t;let a,i,l,d,c,x=C[e.baseName]||ee(e);return(0,s.jsxs)(r.Card,{className:"group relative bg-black/20 backdrop-blur-md border border-neonCyan/30 hover:border-neonPink/50 shadow-lg transition-all duration-300 hover:scale-105 hover:shadow-neon animate-fade-in",style:{background:"rgba(0, 0, 0, 0.4)",backdropFilter:"blur(10px)",boxShadow:"0 0 20px rgba(0, 255, 255, 0.1), inset 0 0 20px rgba(255, 0, 255, 0.05)"},children:[(0,s.jsxs)(r.CardHeader,{className:"pb-3",children:[(0,s.jsx)(r.CardTitle,{className:"text-neonCyan group-hover:text-neonPink transition-colors duration-300 text-lg",children:e.baseName}),e.description&&(0,s.jsx)("p",{className:"text-gray-300 text-sm mt-1 group-hover:text-gray-200 transition-colors duration-300",children:e.description})]}),(0,s.jsxs)(r.CardContent,{children:[e.variants.length>1&&(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("p",{className:"text-gray-300 text-sm mb-2 group-hover:text-gray-200 transition-colors duration-300",children:"Size:"}),(0,s.jsx)("div",{className:"flex gap-2",children:e.variants.map(t=>{let a=x===t.size;return(0,s.jsx)("button",{onClick:()=>k(s=>({...s,[e.baseName]:t.size})),className:`px-3 py-1 rounded text-sm font-medium transition-all duration-300 ${a?"bg-neonCyan/80 text-black backdrop-blur-sm shadow-md":"bg-black/30 text-gray-300 hover:bg-black/50 hover:text-neonCyan backdrop-blur-sm border border-gray-600/50 hover:border-neonCyan/30"}`,children:t.size},t.id)})})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("span",{className:"text-2xl font-bold text-neonPink group-hover:text-neonCyan transition-colors duration-300",children:["R",(a=Z(e,x),(a?.price||e.variants[0].price).toFixed(2))]}),(t=(i=Z(e,x)||e.variants[0]).id,d=(l=D.find(e=>e.id===t))?l.quantity:0,c=G(e,x),0===d?(0,s.jsxs)(n.Button,{onClick:()=>((e,s)=>{if(e.variants.length>1&&!s)return;let t=s&&Z(e,s)||e.variants[0];U({id:t.id,name:t.name,price:t.price,quantity:1})})(e,x),disabled:c,className:`font-semibold transition-all duration-300 backdrop-blur-sm shadow-md ${c?"bg-gray-600/50 text-gray-400 cursor-not-allowed border border-gray-600/30":"bg-neonCyan/80 text-black hover:bg-neonPink/80 hover:text-white border border-neonCyan/30 hover:border-neonPink/50"}`,children:[(0,s.jsx)(o.Plus,{className:"h-4 w-4 mr-1"}),c?"Select Size":"Add"]}):(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(n.Button,{size:"sm",variant:"outline",onClick:()=>er(i.id,d-1),className:"border-neonCyan/30 text-neonCyan hover:bg-neonCyan/20 hover:text-neonPink backdrop-blur-sm transition-all duration-300",children:(0,s.jsx)(m.Minus,{className:"h-3 w-3"})}),(0,s.jsx)("span",{className:"text-white font-semibold min-w-[2rem] text-center",children:d}),(0,s.jsx)(n.Button,{size:"sm",variant:"outline",onClick:()=>er(i.id,d+1),className:"border-neonCyan/30 text-neonCyan hover:bg-neonCyan/20 hover:text-neonPink backdrop-blur-sm transition-all duration-300",children:(0,s.jsx)(o.Plus,{className:"h-3 w-3"})})]}))]}),(0,s.jsx)("div",{className:"absolute inset-0 rounded-xl bg-gradient-to-r from-neonCyan/5 to-neonPink/5 opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"})]})]},e.id)})})})]}),(0,s.jsx)("div",{className:"w-80 bg-gray-900 border-l border-gray-700 min-h-screen",children:(0,s.jsxs)("div",{className:"p-4 sticky top-0",children:[(0,s.jsxs)("h2",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[(0,s.jsx)(c.ShoppingCart,{className:"h-5 w-5 text-neonPink"}),"Your Cart",D.length>0&&(0,s.jsx)(i.Badge,{className:"bg-neonPink text-black ml-2",children:D.reduce((e,s)=>e+s.quantity,0)})]}),0===D.length?(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)(c.ShoppingCart,{className:"h-12 w-12 text-gray-600 mx-auto mb-3"}),(0,s.jsx)("p",{className:"text-gray-400",children:"Your cart is empty"}),(0,s.jsx)("p",{className:"text-gray-500 text-sm",children:"Add items from the menu"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"space-y-3 mb-6 max-h-96 overflow-y-auto",children:D.map(e=>(0,s.jsxs)("div",{className:"bg-gray-800 rounded-lg p-3",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,s.jsx)("h4",{className:"font-semibold text-white text-sm",children:e.name}),(0,s.jsx)("button",{onClick:()=>H(e.id),className:"text-red-400 hover:text-red-300 p-1",children:(0,s.jsx)(x.Trash2,{className:"h-4 w-4"})})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(n.Button,{size:"sm",variant:"outline",onClick:()=>Y(e.id,e.quantity-1),className:"border-gray-600 text-gray-300 hover:bg-gray-700 h-8 w-8 p-0",children:(0,s.jsx)(m.Minus,{className:"h-3 w-3"})}),(0,s.jsx)("span",{className:"text-white font-semibold min-w-[1.5rem] text-center",children:e.quantity}),(0,s.jsx)(n.Button,{size:"sm",variant:"outline",onClick:()=>Y(e.id,e.quantity+1),className:"border-gray-600 text-gray-300 hover:bg-gray-700 h-8 w-8 p-0",children:(0,s.jsx)(o.Plus,{className:"h-3 w-3"})})]}),(0,s.jsxs)("span",{className:"text-neonPink font-bold",children:["R",(e.price*e.quantity).toFixed(2)]})]})]},e.id))}),(0,s.jsxs)("div",{className:"border-t border-gray-700 pt-4 space-y-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-lg font-semibold text-white",children:"Total:"}),(0,s.jsxs)("span",{className:"text-2xl font-bold text-neonCyan",children:["R",W().toFixed(2)]})]}),(0,s.jsx)(n.Button,{className:"w-full bg-gradient-to-r from-neonPink to-neonCyan text-black font-bold py-3 hover:scale-105 transition-transform",onClick:()=>v(!0),children:"Checkout"})]})]})]})})]}),(0,s.jsx)(X,{isOpen:N,onClose:()=>v(!1)})]})}var et=e.i(871689),ea=e.i(488844),er=e.i(687130);function en(){let[e,f]=(0,t.useState)(null),[N,v]=(0,t.useState)(!1),[C,k]=(0,t.useState)({}),[P,S]=(0,t.useState)(null),[z,B]=(0,t.useState)(!1),[R,F]=(0,t.useState)("menu"),[L,M]=(0,t.useState)(!1),$=(0,a.useSearchParams)(),A=(0,a.useRouter)(),_=$.get("category"),T=$.get("payment"),q=$.get("payment_id"),I=$.get("reason"),{categories:E,menuItems:O,loading:D,error:U,refetch:Y}=(0,y.useMenu)(),H=(0,t.useMemo)(()=>E.filter(e=>{let s=e.name.toLowerCase();return!(s.includes("pizza add")||s.includes("add-on")||s.includes("add on")||s.includes("addon"))}).sort((e,s)=>e.name.localeCompare(s.name)),[E]),{items:W,addItem:V,updateQuantity:Q,removeItem:J,total:es,clearCart:en}=(0,d.useCartStore)();(0,t.useEffect)(()=>{if("success"===T){B(!0),S({type:"success",message:`Payment successful! ${q?`Payment ID: ${q}`:"Your order has been confirmed."}`}),en();{let e=new URL(window.location.href);e.searchParams.delete("payment"),e.searchParams.delete("payment_id"),window.history.replaceState({},"",e.pathname+e.search)}let e=setTimeout(()=>{S(null),B(!1)},5e3);return()=>clearTimeout(e)}if("error"===T){B(!0),S({type:"error",message:`Payment failed. ${I?`Reason: ${I.replace(/_/g," ")}`:"Please try again."}`});{let e=new URL(window.location.href);e.searchParams.delete("payment"),e.searchParams.delete("reason"),window.history.replaceState({},"",e.pathname+e.search)}let e=setTimeout(()=>{S(null),B(!1)},7e3);return()=>clearTimeout(e)}},[T,q,I,en]),(0,t.useEffect)(()=>{D||0===H.length||(_&&H.some(e=>e.id===_)?f(_):!e&&H.length>0&&f(H[0].id))},[_,H,D,e]);let ei=(0,t.useCallback)(e=>{f(e),M(!1),F("menu"),A.push(`/ordering?category=${e}`,{scroll:!1})},[A]),el=(0,t.useMemo)(()=>e&&0!==O.length?K(O.filter(s=>s.category_id===e)):[],[e,O]),ed=(0,t.useMemo)(()=>H.find(s=>s.id===e)?.name||"Menu",[H,e]),ec=(0,t.useMemo)(()=>ed.toLowerCase().includes("pizza"),[ed]),eo=(0,t.useCallback)(e=>O.filter(s=>s.category_id===e).length,[O]),em=(e,s)=>{s<=0?J(e):Q(e,s)};return D&&!z?(0,s.jsxs)("div",{className:"min-h-screen bg-darkBg",children:[(0,s.jsx)("div",{className:"sticky top-0 z-40 bg-darkBg/95 backdrop-blur-sm border-b border-gray-700 px-4 py-3",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h1",{className:"text-xl font-bold bg-neon-gradient bg-clip-text text-transparent",children:"Little Latte Lane"}),(0,s.jsx)("div",{className:"w-8 h-8 bg-gray-700 rounded-full animate-pulse"})]})}),(0,s.jsx)("div",{className:"sticky top-14 z-30 bg-darkBg/95 backdrop-blur-sm border-b border-gray-700 px-4",children:(0,s.jsx)("div",{className:"flex",children:["Categories","Menu","Cart"].map(e=>(0,s.jsx)("div",{className:"flex-1 py-3 text-center bg-gray-700 animate-pulse text-gray-500",children:e},e))})}),(0,s.jsx)("div",{className:"p-4",children:(0,s.jsx)(j.MenuItemSkeleton,{count:4})})]}):U?(0,s.jsx)("div",{className:"min-h-screen bg-darkBg",children:(0,s.jsx)(j.ErrorState,{title:"Menu Temporarily Unavailable",message:`We're having trouble loading the menu. ${U}`,onRetry:Y,className:"min-h-screen"})}):(0,s.jsxs)("div",{className:"min-h-screen bg-darkBg",children:[P&&(0,s.jsx)("div",{className:"fixed top-4 left-4 right-4 z-50",children:(0,s.jsxs)(l.Alert,{className:`${"success"===P.type?"bg-green-900/90 border-green-500 text-green-100":"bg-red-900/90 border-red-500 text-red-100"} backdrop-blur-sm`,children:["success"===P.type?(0,s.jsx)(g,{className:"h-4 w-4"}):(0,s.jsx)(p.AlertCircle,{className:"h-4 w-4"}),(0,s.jsxs)(l.AlertDescription,{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm",children:P.message}),(0,s.jsx)("button",{onClick:()=>S(null),className:"ml-2 hover:opacity-70",children:(0,s.jsx)(b.X,{className:"h-4 w-4"})})]})]})}),(0,s.jsx)("div",{className:"sticky top-0 z-40 bg-darkBg/95 backdrop-blur-sm border-b border-gray-700",children:(0,s.jsxs)("div",{className:"flex items-center justify-between px-4 py-3",children:[(0,s.jsx)("h1",{className:"text-xl font-bold bg-neon-gradient bg-clip-text text-transparent",children:"Little Latte Lane"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)(n.Button,{variant:"outline",onClick:()=>M(!L),className:"bg-darkBg border-neonCyan/30 text-neonCyan hover:bg-neonCyan/10 flex items-center gap-2",children:[(0,s.jsx)(er.Filter,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"hidden sm:inline",children:ed}),(0,s.jsx)("span",{className:"sm:hidden",children:"Filter"})]}),L&&(0,s.jsx)("div",{className:"absolute right-0 top-full mt-2 w-64 bg-gray-900 border border-gray-700 rounded-lg shadow-xl z-50 max-h-80 overflow-y-auto",children:(0,s.jsxs)("div",{className:"p-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-2 border-b border-gray-700 mb-2",children:[(0,s.jsx)("span",{className:"text-sm font-semibold text-white",children:"Select Category"}),(0,s.jsx)("button",{onClick:()=>M(!1),className:"text-gray-400 hover:text-white",children:(0,s.jsx)(b.X,{className:"h-4 w-4"})})]}),H.map(t=>(0,s.jsx)("button",{onClick:()=>ei(t.id),className:`w-full text-left p-3 rounded-lg transition-all duration-200 mb-1 ${e===t.id?"bg-neonCyan text-black font-semibold":"text-gray-300 hover:bg-gray-800 hover:text-white"}`,children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm",children:t.name}),(0,s.jsx)(i.Badge,{variant:"secondary",className:"bg-gray-600 text-gray-200 text-xs",children:eo(t.id)})]})},t.id))]})})]})]})}),(0,s.jsx)("div",{className:"sticky top-14 z-30 bg-darkBg/95 backdrop-blur-sm border-b border-gray-700",children:(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("button",{onClick:()=>F("categories"),className:`flex-1 py-3 px-4 text-center font-medium transition-all duration-200 ${"categories"===R?"bg-neonCyan/20 text-neonCyan border-b-2 border-neonCyan":"text-gray-400 hover:text-white hover:bg-gray-800/50"}`,children:(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,s.jsx)(h.ChefHat,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"text-sm",children:"Categories"})]})}),(0,s.jsx)("button",{onClick:()=>F("menu"),className:`flex-1 py-3 px-4 text-center font-medium transition-all duration-200 ${"menu"===R?"bg-neonPink/20 text-neonPink border-b-2 border-neonPink":"text-gray-400 hover:text-white hover:bg-gray-800/50"}`,children:(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,s.jsx)(ea.Package,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"text-sm",children:"Menu"}),el.length>0&&(0,s.jsx)(i.Badge,{variant:"secondary",className:"bg-gray-600 text-xs",children:el.length})]})}),(0,s.jsx)("button",{onClick:()=>F("cart"),className:`flex-1 py-3 px-4 text-center font-medium transition-all duration-200 ${"cart"===R?"bg-orange-500/20 text-orange-400 border-b-2 border-orange-400":"text-gray-400 hover:text-white hover:bg-gray-800/50"}`,children:(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,s.jsx)(c.ShoppingCart,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"text-sm",children:"Cart"}),W.length>0&&(0,s.jsx)(i.Badge,{className:"bg-orange-500 text-black text-xs",children:W.reduce((e,s)=>e+s.quantity,0)})]})})]})}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto",children:["categories"===R&&(0,s.jsxs)("div",{className:"p-4 space-y-3",children:[(0,s.jsxs)("div",{className:"text-center mb-4",children:[(0,s.jsx)("h2",{className:"text-lg font-bold text-white mb-1",children:"Browse Categories"}),(0,s.jsx)("p",{className:"text-gray-400 text-sm",children:"Select a category to view menu items"})]}),H.map(t=>(0,s.jsx)("button",{onClick:()=>ei(t.id),className:`w-full text-left p-4 rounded-lg transition-all duration-200 ${e===t.id?"bg-neonCyan/20 border border-neonCyan text-white":"bg-gray-800/50 border border-gray-700 text-gray-300 hover:bg-gray-700 hover:text-white"}`,children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold",children:t.name}),t.description&&(0,s.jsx)("p",{className:"text-sm text-gray-400 mt-1 line-clamp-2",children:t.description})]}),(0,s.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[(0,s.jsxs)(i.Badge,{variant:"secondary",className:"bg-gray-600 text-gray-200 text-xs",children:[eo(t.id)," items"]}),e===t.id&&(0,s.jsx)("div",{className:"text-neonCyan text-xs",children:"Selected"})]})]})},t.id))]}),"menu"===R&&(0,s.jsx)("div",{className:"p-4",children:e?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-white",children:ed}),(0,s.jsxs)("p",{className:"text-gray-400 text-sm",children:[el.length," items available"]})]}),(0,s.jsxs)(n.Button,{variant:"outline",size:"sm",onClick:()=>F("categories"),className:"border-gray-600 text-gray-300 hover:bg-gray-700",children:[(0,s.jsx)(et.ArrowLeft,{className:"h-4 w-4 mr-1"}),"Change"]})]}),ec?(0,s.jsx)(w,{}):(0,s.jsx)(s.Fragment,{children:0===el.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(u.Clock,{className:"h-12 w-12 text-gray-500 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-400",children:"No items available in this category"})]}):(0,s.jsx)("div",{className:"space-y-4",children:el.map(e=>{var t;let a,i,l,d,c,x=C[e.baseName]||ee(e);return(0,s.jsx)(r.Card,{className:"bg-gray-800/50 border border-gray-700 hover:border-neonCyan/50 transition-all duration-300",children:(0,s.jsx)(r.CardContent,{className:"p-4",children:(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-white mb-1",children:e.baseName}),e.description&&(0,s.jsx)("p",{className:"text-gray-400 text-sm line-clamp-2",children:e.description})]}),e.variants.length>1&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-300 text-sm mb-2",children:"Size:"}),(0,s.jsx)("div",{className:"flex gap-2 flex-wrap",children:e.variants.map(t=>{let a=x===t.size;return(0,s.jsxs)("button",{onClick:()=>k(s=>({...s,[e.baseName]:t.size})),className:`px-3 py-1 rounded text-sm font-medium transition-all duration-300 ${a?"bg-neonCyan text-black":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:[t.size," - R",t.price.toFixed(2)]},t.id)})})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("span",{className:"text-xl font-bold text-neonPink",children:["R",(a=Z(e,x),(a?.price||e.variants[0].price).toFixed(2))]}),(t=(i=Z(e,x)||e.variants[0]).id,d=(l=W.find(e=>e.id===t))?l.quantity:0,c=G(e,x),0===d?(0,s.jsxs)(n.Button,{onClick:()=>((e,s)=>{if(e.variants.length>1&&!s)return;let t=s&&Z(e,s)||e.variants[0];V({id:t.id,name:t.name,price:t.price,quantity:1})})(e,x),disabled:c,className:`font-semibold ${c?"bg-gray-600/50 text-gray-400 cursor-not-allowed":"bg-neonCyan text-black hover:bg-neonCyan/80"}`,children:[(0,s.jsx)(o.Plus,{className:"h-4 w-4 mr-1"}),c?"Select Size":"Add to Cart"]}):(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(n.Button,{size:"sm",variant:"outline",onClick:()=>em(i.id,d-1),className:"border-gray-600 text-gray-300 hover:bg-gray-700 h-8 w-8 p-0",children:(0,s.jsx)(m.Minus,{className:"h-3 w-3"})}),(0,s.jsx)("span",{className:"text-white font-semibold min-w-[2rem] text-center",children:d}),(0,s.jsx)(n.Button,{size:"sm",variant:"outline",onClick:()=>em(i.id,d+1),className:"border-gray-600 text-gray-300 hover:bg-gray-700 h-8 w-8 p-0",children:(0,s.jsx)(o.Plus,{className:"h-3 w-3"})})]}))]})]})})},e.id)})})})]}):(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(h.ChefHat,{className:"h-12 w-12 text-gray-500 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-400 mb-2",children:"Select a category first"}),(0,s.jsx)(n.Button,{onClick:()=>F("categories"),className:"bg-neonCyan/20 text-neonCyan hover:bg-neonCyan/30",children:"Browse Categories"})]})}),"cart"===R&&(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[(0,s.jsx)(c.ShoppingCart,{className:"h-5 w-5 text-orange-400"}),"Your Cart"]}),W.length>0&&(0,s.jsxs)(i.Badge,{className:"bg-orange-500 text-black",children:[W.reduce((e,s)=>e+s.quantity,0)," items"]})]}),0===W.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(c.ShoppingCart,{className:"h-12 w-12 text-gray-600 mx-auto mb-3"}),(0,s.jsx)("p",{className:"text-gray-400 mb-2",children:"Your cart is empty"}),(0,s.jsx)("p",{className:"text-gray-500 text-sm mb-4",children:"Add items from the menu"}),(0,s.jsx)(n.Button,{onClick:()=>F("menu"),className:"bg-neonCyan/20 text-neonCyan hover:bg-neonCyan/30",children:"Browse Menu"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"space-y-3 mb-6",children:W.map(e=>(0,s.jsx)(r.Card,{className:"bg-gray-800/50 border border-gray-700",children:(0,s.jsxs)(r.CardContent,{className:"p-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h4",{className:"font-semibold text-white",children:e.name}),e.description&&(0,s.jsx)("p",{className:"text-gray-400 text-sm mt-1 line-clamp-2",children:e.description})]}),(0,s.jsx)("button",{onClick:()=>J(e.id),className:"text-red-400 hover:text-red-300 p-1 ml-2",children:(0,s.jsx)(x.Trash2,{className:"h-4 w-4"})})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(n.Button,{size:"sm",variant:"outline",onClick:()=>Q(e.id,e.quantity-1),className:"border-gray-600 text-gray-300 hover:bg-gray-700 h-8 w-8 p-0",children:(0,s.jsx)(m.Minus,{className:"h-3 w-3"})}),(0,s.jsx)("span",{className:"text-white font-semibold min-w-[2rem] text-center",children:e.quantity}),(0,s.jsx)(n.Button,{size:"sm",variant:"outline",onClick:()=>Q(e.id,e.quantity+1),className:"border-gray-600 text-gray-300 hover:bg-gray-700 h-8 w-8 p-0",children:(0,s.jsx)(o.Plus,{className:"h-3 w-3"})})]}),(0,s.jsxs)("span",{className:"text-lg font-bold text-orange-400",children:["R",(e.price*e.quantity).toFixed(2)]})]})]})},e.id))}),(0,s.jsxs)("div",{className:"bg-gray-800/50 border border-gray-700 rounded-lg p-4 space-y-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-lg font-semibold text-white",children:"Total:"}),(0,s.jsxs)("span",{className:"text-2xl font-bold text-neonCyan",children:["R",es().toFixed(2)]})]}),(0,s.jsx)(n.Button,{className:"w-full bg-gradient-to-r from-neonPink to-neonCyan text-black font-bold py-3 hover:scale-105 transition-transform",onClick:()=>v(!0),children:"Proceed to Checkout"})]})]})]})]}),(0,s.jsx)(X,{isOpen:N,onClose:()=>v(!1)})]})}function ei(){let[e,a]=(0,t.useState)(!1),[r,n]=(0,t.useState)(!1);return((0,t.useEffect)(()=>{n(!0);let e=()=>{a(window.innerWidth<1024)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),r)?e?(0,s.jsx)(en,{}):(0,s.jsx)(es,{}):(0,s.jsx)("div",{className:"min-h-screen bg-darkBg text-white flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"w-8 h-8 border-2 border-neonCyan border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-purple-400",children:"Loading menu..."})]})})}function el(){return(0,s.jsx)(t.Suspense,{fallback:(0,s.jsx)("div",{className:"min-h-screen bg-darkBg text-white flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(j.LoadingSpinner,{size:"lg",className:"mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-purple-400",children:"Loading menu..."})]})}),children:(0,s.jsx)(ei,{})})}e.s(["default",()=>el],752103)}]);

//# debugId=790b076a-2ab2-c687-7a32-19dfb291f3a6
//# sourceMappingURL=c38e940950e7cc44.js.map