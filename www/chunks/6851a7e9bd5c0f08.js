;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="f1b8222e-f922-8753-59f0-ddf6d4702402")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,487486,e=>{"use strict";var s=e.i(843476),r=e.i(991918),t=e.i(225913),a=e.i(975157);let l=(0,t.cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function i({className:e,variant:t,asChild:i=!1,...n}){let d=i?r.Slot:"span";return(0,s.jsx)(d,{"data-slot":"badge",className:(0,a.cn)(l({variant:t}),e),...n})}e.s(["Badge",()=>i])},503116,e=>{"use strict";let s=(0,e.i(475254).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["Clock",()=>s],503116)},343432,e=>{"use strict";let s=(0,e.i(475254).default)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);e.s(["Phone",()=>s],343432)},87316,e=>{"use strict";let s=(0,e.i(475254).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>s],87316)},878894,e=>{"use strict";let s=(0,e.i(475254).default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["AlertTriangle",()=>s],878894)},694351,e=>{"use strict";let s=(0,e.i(475254).default)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);e.s(["Home",()=>s],694351)},212426,686311,e=>{"use strict";var s=e.i(475254);let r=(0,s.default)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);e.s(["DollarSign",()=>r],212426);let t=(0,s.default)("message-square",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);e.s(["MessageSquare",()=>t],686311)},284614,e=>{"use strict";let s=(0,e.i(475254).default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>s],284614)},488844,e=>{"use strict";let s=(0,e.i(475254).default)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);e.s(["Package",()=>s],488844)},265056,e=>{"use strict";let s=(0,e.i(475254).default)("chef-hat",[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]]);e.s(["ChefHat",()=>s],265056)},892680,e=>{"use strict";var s=e.i(95187),r=(0,s.createServerReference)("60279a1c0fb6fcd400bee5330d97d724f08fc89b54",s.callServer,void 0,s.findSourceMapURL,"updateOrderStatus");e.s(["updateOrderStatus",()=>r])},860132,e=>{"use strict";var s=e.i(95187),r=(0,s.createServerReference)("009f292545c823dd8be9f90654ab5893b73f645ada",s.callServer,void 0,s.findSourceMapURL,"getStaffOrders");e.s(["getStaffOrders",()=>r])},486331,e=>{"use strict";var s=e.i(843476),r=e.i(776639),t=e.i(487486),a=e.i(519455),l=e.i(284614),i=e.i(346897),n=e.i(343432),d=e.i(503116),c=e.i(488844),o=e.i(265056),m=e.i(63209),x=e.i(87316),h=e.i(212426),u=e.i(686311);function g({order:e,isOpen:g,onClose:p,hideTechnicalDetails:b=!1}){if(!e)return null;let y=e=>new Date(e).toLocaleString("en-ZA",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}),f=e=>new Date(e).toLocaleTimeString("en-ZA",{hour:"2-digit",minute:"2-digit"});return(0,s.jsx)(r.Dialog,{open:g,onOpenChange:p,children:(0,s.jsxs)(r.DialogContent,{className:"w-full max-w-5xl max-h-[90vh] sm:max-h-[85vh] overflow-y-auto bg-darkBg/95 backdrop-blur-md border-2 border-neonCyan/50 text-neonText mx-2 sm:mx-4",style:{background:"rgba(0, 0, 0, 0.95)",backdropFilter:"blur(15px)",boxShadow:"0 0 30px rgba(0, 255, 255, 0.2), inset 0 0 30px rgba(0, 255, 255, 0.1)"},children:[(0,s.jsx)(r.DialogHeader,{children:(0,s.jsxs)(r.DialogTitle,{className:"text-2xl font-bold text-neonCyan flex items-center gap-3",children:[(0,s.jsx)(c.Package,{className:"h-6 w-6"}),"Order Details: ",e.order_number||`#${e.id.slice(0,8)}...`]})}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"bg-black/40 backdrop-blur-sm border border-neonCyan/30 rounded-lg p-4",style:{background:"rgba(0, 0, 0, 0.4)",backdropFilter:"blur(10px)"},children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-neonCyan mb-3 flex items-center gap-2",children:[(0,s.jsx)(m.AlertCircle,{className:"h-5 w-5"}),"Order Status"]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-gray-300",children:"Current Status:"}),(0,s.jsx)(t.Badge,{className:(e=>{switch(e?.toLowerCase()){case"confirmed":return"bg-yellow-400/20 text-yellow-400 border-yellow-400/30";case"preparing":return"bg-orange-400/20 text-orange-400 border-orange-400/30";case"ready":return"bg-green-400/20 text-green-400 border-green-400/30";case"completed":case"delivered":return"bg-blue-400/20 text-blue-400 border-blue-400/30";case"cancelled":return"bg-red-400/20 text-red-400 border-red-400/30";default:return"bg-gray-400/20 text-gray-400 border-gray-400/30"}})(e.status||""),children:e.status||"Unknown"})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-gray-300",children:"Payment Status:"}),(0,s.jsx)(t.Badge,{className:(e=>{switch(e?.toLowerCase()){case"paid":return"bg-green-400/20 text-green-400 border-green-400/30";case"pending":return"bg-yellow-400/20 text-yellow-400 border-yellow-400/30";case"failed":return"bg-red-400/20 text-red-400 border-red-400/30";default:return"bg-gray-400/20 text-gray-400 border-gray-400/30"}})(e.payment_status||""),children:e.payment_status||"Unknown"})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-gray-300",children:"Delivery Method:"}),(0,s.jsx)("span",{className:"text-neonText",children:"delivery"===e.delivery_method?"Delivery":"pickup"===e.delivery_method?"Pickup":"Not specified"})]})]})]}),(0,s.jsxs)("div",{className:"bg-black/40 backdrop-blur-sm border border-neonPink/30 rounded-lg p-4",style:{background:"rgba(0, 0, 0, 0.4)",backdropFilter:"blur(10px)"},children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-neonPink mb-3 flex items-center gap-2",children:[(0,s.jsx)(d.Clock,{className:"h-5 w-5"}),"Timeline"]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-gray-300",children:"Order Placed:"}),(0,s.jsx)("span",{className:"text-neonText text-sm",children:e.created_at?f(e.created_at):"N/A"})]}),e.updated_at&&e.updated_at!==e.created_at&&(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-gray-300",children:"Last Updated:"}),(0,s.jsx)("span",{className:"text-neonText text-sm",children:f(e.updated_at)})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-gray-300",children:"Order Date:"}),(0,s.jsx)("span",{className:"text-neonText text-sm",children:e.created_at?new Date(e.created_at).toLocaleDateString("en-ZA"):"N/A"})]})]})]})]}),(0,s.jsxs)("div",{className:"bg-black/40 backdrop-blur-sm border border-green-400/30 rounded-lg p-4",style:{background:"rgba(0, 0, 0, 0.4)",backdropFilter:"blur(10px)"},children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-green-400 mb-3 flex items-center gap-2",children:[(0,s.jsx)(l.User,{className:"h-5 w-5"}),"Customer & Delivery Info"]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(l.User,{className:"h-4 w-4 text-gray-400 shrink-0"}),(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,s.jsx)("span",{className:"text-gray-300",children:"Customer:"}),(0,s.jsx)("p",{className:"text-neonText break-words",children:e.profiles?.full_name||e.profiles?.email?.split("@")[0]||"Walk-in Customer"})]})]}),e.profiles?.phone&&(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(n.Phone,{className:"h-4 w-4 text-gray-400 shrink-0"}),(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,s.jsx)("span",{className:"text-gray-300",children:"Phone:"}),(0,s.jsx)("p",{className:"text-neonText break-words",children:e.profiles.phone})]})]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(c.Package,{className:"h-4 w-4 text-gray-400 shrink-0"}),(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,s.jsx)("span",{className:"text-gray-300",children:"Method:"}),(0,s.jsx)("p",{className:"text-neonText",children:"delivery"===e.delivery_method?"Delivery":"pickup"===e.delivery_method?"Pickup":"Not specified"})]})]}),"delivery"===e.delivery_method&&e.delivery_address&&(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(i.MapPin,{className:"h-4 w-4 text-gray-400 mt-1 shrink-0"}),(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,s.jsx)("span",{className:"text-gray-300",children:"Delivery Address:"}),(0,s.jsx)("p",{className:"text-neonText mt-1 break-words whitespace-pre-wrap leading-relaxed",children:(e=>{try{let s=JSON.parse(e);if(s.unitNumber&&s.streetAddress)return`${s.unitNumber}, ${s.streetAddress}`;return s.fullAddress||e}catch{return e}})(e.delivery_address)})]})]})]})]})]}),(0,s.jsxs)("div",{className:"bg-black/40 backdrop-blur-sm border border-orange-400/30 rounded-lg p-4",style:{background:"rgba(0, 0, 0, 0.4)",backdropFilter:"blur(10px)"},children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-orange-400 mb-3 flex items-center gap-2",children:[(0,s.jsx)(o.ChefHat,{className:"h-5 w-5"}),"Order Items (",e.order_items?.length||0," items)"]}),(0,s.jsx)("div",{className:"grid gap-3 sm:grid-cols-1 lg:grid-cols-2",children:e.order_items?.map(e=>(0,s.jsxs)("div",{className:"border border-gray-600/50 rounded-lg p-3",children:[(0,s.jsx)("div",{className:"flex justify-between items-start mb-2",children:(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h4",{className:"text-neonText font-medium break-words",children:e.menu_items?.name||"Unknown Item"}),(0,s.jsxs)("p",{className:"text-sm text-gray-400",children:["Qty: ",e.quantity," × R",e.price?.toFixed(2)||"0.00"," = R",((e.quantity||0)*(e.price||0)).toFixed(2)]})]})}),e.special_instructions&&(0,s.jsx)("div",{className:"mt-2 p-2 bg-yellow-400/10 border border-yellow-400/30 rounded",children:(0,s.jsxs)("div",{className:"flex items-start gap-2",children:[(0,s.jsx)(u.MessageSquare,{className:"h-4 w-4 text-yellow-400 mt-0.5 shrink-0"}),(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,s.jsx)("span",{className:"text-yellow-400 text-sm font-medium",children:"Special Instructions:"}),(0,s.jsx)("p",{className:"text-neonText text-sm break-words whitespace-pre-wrap leading-relaxed mt-1",children:e.special_instructions})]})]})})]},e.id))||(0,s.jsx)("p",{className:"text-gray-400 italic col-span-full",children:"No items found"})})]}),(0,s.jsxs)("div",{className:"bg-black/40 backdrop-blur-sm border border-neonPink/30 rounded-lg p-4",style:{background:"rgba(0, 0, 0, 0.4)",backdropFilter:"blur(10px)"},children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-neonPink mb-3 flex items-center gap-2",children:[(0,s.jsx)(h.DollarSign,{className:"h-5 w-5"}),"Order Summary"]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center text-lg",children:[(0,s.jsx)("span",{className:"text-gray-300",children:"Total Amount:"}),(0,s.jsxs)("span",{className:"text-neonPink font-bold",children:["R",e.total_amount?.toFixed(2)||"0.00"]})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-gray-300",children:"Items Count:"}),(0,s.jsxs)("span",{className:"text-neonText",children:[e.order_items?.length||0," items"]})]})]}),e.special_instructions&&(0,s.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-600/50",children:(0,s.jsxs)("div",{className:"flex items-start gap-2",children:[(0,s.jsx)(u.MessageSquare,{className:"h-4 w-4 text-neonPink mt-0.5 shrink-0"}),(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,s.jsx)("span",{className:"text-neonPink text-sm font-medium",children:"Order Instructions:"}),(0,s.jsx)("p",{className:"text-neonText mt-1 break-words whitespace-pre-wrap leading-relaxed",children:e.special_instructions})]})]})})]}),!b&&(0,s.jsxs)("div",{className:"bg-black/40 backdrop-blur-sm border border-gray-400/30 rounded-lg p-4",style:{background:"rgba(0, 0, 0, 0.4)",backdropFilter:"blur(10px)"},children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-gray-400 mb-3 flex items-center gap-2",children:[(0,s.jsx)(x.Calendar,{className:"h-5 w-5"}),"Technical Details"]}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-400",children:"Order ID:"}),(0,s.jsx)("p",{className:"text-neonText font-mono break-all",children:e.id})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-400",children:"Created:"}),(0,s.jsx)("p",{className:"text-neonText",children:e.created_at?y(e.created_at):"N/A"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-400",children:"User ID:"}),(0,s.jsx)("p",{className:"text-neonText font-mono break-all",children:e.user_id||"N/A"})]}),e.updated_at&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-400",children:"Last Updated:"}),(0,s.jsx)("p",{className:"text-neonText",children:y(e.updated_at)})]})]})]})]}),(0,s.jsx)("div",{className:"flex justify-end pt-4",children:(0,s.jsx)(a.Button,{onClick:p,className:"bg-neonCyan/20 hover:bg-neonCyan/30 text-neonCyan border border-neonCyan/50",children:"Close Details"})})]})]})})}e.s(["default",()=>g])},191471,e=>{"use strict";e.i(247167);var s=e.i(843476),r=e.i(271645),t=e.i(618566),a=e.i(390464),l=e.i(860132),i=e.i(95187),n=(0,i.createServerReference)("40bf9a31a939bd2d2c56a9c3c18cac3e7cbaaf1934",i.callServer,void 0,i.findSourceMapURL,"getAllStaffOrders"),d=e.i(892680),c=e.i(486331),o=e.i(519455),m=e.i(487486);async function x(e){try{let s=function(e){let s=e.order_number||e.order_id.slice(0,8),r=e.customer_name?`${e.customer_name.split(" ")[0]}, your`:"Your";switch(e.status){case"ready":return{title:"✅ Order Ready for Pickup!",body:`${r} order #${s} is ready! Come collect it at Little Latte Lane.`};case"preparing":return{title:"👨‍🍳 Order Being Prepared",body:`${r} order #${s} is now being prepared by our kitchen.`};case"completed":return{title:"🎉 Order Completed",body:`Thank you! Order #${s} has been completed. We hope you enjoy your meal!`};default:return{title:"📦 Order Update",body:`Your order #${s} has been updated.`}}}(e),r=await fetch("/api/notifications/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:e.user_id,title:s.title,body:s.body,notification_type:"order_status",category:`order_${e.status}`,action_url:"/account",data:{order_id:e.order_id,order_number:e.order_number,status:e.status,timestamp:Date.now()}})});if(!r.ok){let e=await r.json();return console.error("❌ Failed to send notification:",e),{success:!1,message:e.error||"Failed to send notification"}}let t=await r.json();return{success:!0,message:"Notification sent successfully",delivered:t.delivered||!1}}catch(e){return console.error("💥 Error sending order status notification:",e),{success:!1,message:e instanceof Error?e.message:"Unexpected error occurred"}}}var h=e.i(16715),u=e.i(503116),g=e.i(265056),p=e.i(488844),b=e.i(269638),y=e.i(475254);let f=(0,y.default)("timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]),v=(0,y.default)("volume-2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);var j=e.i(871689),N=e.i(87316),w=e.i(975157);function k({className:e}){return(0,s.jsx)("div",{className:(0,w.cn)("animate-pulse rounded-md bg-gray-700/50",e)})}function _(){return(0,s.jsxs)("div",{className:"rounded-lg border border-gray-600 bg-gray-800 p-4 space-y-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(k,{className:"h-5 w-32"}),(0,s.jsx)(k,{className:"h-3 w-24"})]}),(0,s.jsx)(k,{className:"h-6 w-16"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(k,{className:"h-3 w-full"}),(0,s.jsx)(k,{className:"h-3 w-3/4"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsx)(k,{className:"h-8 w-full"}),(0,s.jsx)(k,{className:"h-8 w-full"})]})]})}var C=r,T=e.i(929592),S=e.i(878894);let D=(0,y.default)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);var A=e.i(694351);class O extends C.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,s){console.error("Error caught by boundary:",e,s),this.setState(e=>({...e,errorInfo:s})),console.error("Production error logged:",{error:e,errorInfo:s})}handleRetry=()=>{this.setState({hasError:!1,error:null,errorInfo:void 0})};handleGoHome=()=>{window.location.href="/"};render(){return this.state.hasError?this.props.fallback?this.props.fallback:(0,s.jsx)("div",{className:"flex flex-col items-center justify-center min-h-[400px] p-8",children:(0,s.jsxs)("div",{className:"max-w-md w-full text-center",children:[(0,s.jsx)(S.AlertTriangle,{className:"h-16 w-16 text-red-400 mx-auto mb-4"}),(0,s.jsxs)(T.Alert,{className:"mb-6",children:[(0,s.jsxs)(T.AlertTitle,{className:"text-red-400 flex items-center gap-2",children:[(0,s.jsx)(S.AlertTriangle,{className:"h-4 w-4"}),"Something went wrong"]}),(0,s.jsx)(T.AlertDescription,{className:"mt-2",children:this.state.error?.message||"An unexpected error occurred. We've been notified and are working on a fix."})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)(o.Button,{onClick:this.handleRetry,className:"w-full bg-neonCyan text-black hover:bg-neonCyan/80",children:[(0,s.jsx)(D,{className:"w-4 h-4 mr-2"}),"Try Again"]}),(0,s.jsxs)(o.Button,{onClick:this.handleGoHome,variant:"outline",className:"w-full border-gray-600 text-gray-300 hover:bg-gray-700",children:[(0,s.jsx)(A.Home,{className:"w-4 h-4 mr-2"}),"Go Home"]})]}),this.props.showDetails&&!1]})}):this.props.children}}var B=e.i(705766);function M(){let{profile:i}=(0,a.useAuth)(),y=(0,t.useRouter)(),[w,k]=(0,r.useState)([]),[C,T]=(0,r.useState)([]),[S,D]=(0,r.useState)(!0),[A,M]=(0,r.useState)(null),[$]=(0,r.useState)(!0),[P,R]=(0,r.useState)(0),[L,q]=(0,r.useState)(0),[F,U]=(0,r.useState)(null),[z,H]=(0,r.useState)(!1),[V,E]=(0,r.useState)(!1),[I,K]=(0,r.useState)("today"),W=(0,r.useCallback)(async()=>{try{let e=await (0,l.getStaffOrders)();if(!e.success){console.error("❌ Kitchen View: Error fetching orders:",e.error),B.default.error("Failed to fetch orders");return}let s=e.data.length;if(L>0&&s>L&&$){R(s-L);try{let e=new(window.AudioContext||window.webkitAudioContext),r=e.createOscillator(),t=e.createGain();r.connect(t),t.connect(e.destination),r.frequency.setValueAtTime(800,e.currentTime),r.frequency.setValueAtTime(600,e.currentTime+.1),t.gain.setValueAtTime(.3,e.currentTime),t.gain.exponentialRampToValueAtTime(.01,e.currentTime+.3),r.start(e.currentTime),r.stop(e.currentTime+.3),B.default.success(`🔔 ${s-L} new order(s) received!`,{duration:4e3,style:{background:"#10b981",color:"white"}})}catch(e){}setTimeout(()=>R(0),5e3)}q(s);let r=e.data.map(e=>({...e,delivery_address:e.delivery_address||void 0}));k(r),M(new Date)}catch(e){console.error("💥 Kitchen View: Unexpected error:",e),B.default.error("Unexpected error occurred")}},[L,$]);(0,r.useEffect)(()=>{if(!i?.is_staff&&!i?.is_admin)return void y.push("/");(async()=>{await W(),D(!1)})();let e=setInterval(W,15e3);return()=>{clearInterval(e)}},[i,y,W]),(0,r.useEffect)(()=>{V&&(async()=>{try{let e=await n(I);if(e.success){let s=e.data.map(e=>({...e,delivery_address:e.delivery_address||void 0}));T(s)}}catch(e){console.error("Error fetching all orders:",e)}})()},[I,V]);let Z=async(e,s)=>{try{let r=w.find(s=>s.id===e),t=await (0,d.updateOrderStatus)(e,s);if(!t.success){B.default.error("Failed to update order status"),console.error("❌ Kitchen View: Error updating order:",t.error);return}B.default.success(`Order moved to ${s}`),"ready"===s&&r?.user_id&&x({user_id:r.user_id,order_id:r.id,order_number:r.order_number||r.id.slice(0,8),status:"ready",customer_name:r.profiles?.full_name||void 0,total_amount:r.total_amount||void 0}).then(e=>{e.success&&B.default.success("📲 Customer notified!",{duration:3e3,style:{background:"#10b981",color:"white"}})}).catch(e=>{console.error("💥 Notification error:",e)}),W()}catch(e){B.default.error("Failed to update order status"),console.error("💥 Kitchen View: Unexpected error updating order:",e)}},G=e=>{U(e),H(!0)},J=async()=>{if(!V)try{let e=await n(I);if(e.success){let s=e.data.map(e=>({...e,delivery_address:e.delivery_address||void 0}));T(s)}else B.default.error("Failed to load all orders")}catch(e){console.error("Error fetching all orders:",e),B.default.error("Error loading all orders")}E(!V)},Y=e=>{switch(e){case"draft":return"bg-neonCyan/20 border-neonCyan/50 text-neonCyan";case"ready":return"bg-emerald-400/20 border-emerald-400/50 text-emerald-300";case"completed":return"bg-purple-400/20 border-purple-400/50 text-purple-300";default:return"bg-gray-500/20 border-gray-500/50 text-gray-300"}},Q=e=>{if(!e)return"Unknown time";let s=new Date(e),r=Math.floor((new Date().getTime()-s.getTime())/6e4);return r<60?`${r}m ago`:s.toLocaleTimeString("en-ZA",{hour:"2-digit",minute:"2-digit"})},X=e=>{if(!e.created_at)return!1;let s=new Date(e.created_at);return Math.floor((new Date().getTime()-s.getTime())/6e4)>20||"ready"===e.status},ee=()=>w.sort((e,s)=>new Date(e.created_at||0).getTime()-new Date(s.created_at||0).getTime()).filter(e=>["confirmed","preparing"].includes(e.status||"")),es=()=>w.filter(e=>"ready"===e.status).sort((e,s)=>{let r=new Date(e.updated_at||e.created_at||0).getTime();return new Date(s.updated_at||s.created_at||0).getTime()-r});if(S)return(0,s.jsxs)("div",{className:"h-screen bg-darkBg text-neonText overflow-hidden",children:[(0,s.jsx)("div",{className:"bg-gray-900/95 backdrop-blur-md border-b border-gray-700/50 fixed top-0 left-0 right-0 z-50",children:(0,s.jsx)("div",{className:"max-w-full px-4 py-3",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-gray-700 rounded animate-pulse"}),(0,s.jsx)("div",{className:"w-32 h-6 bg-gray-700 rounded animate-pulse"})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("div",{className:"w-20 h-8 bg-gray-700 rounded animate-pulse"}),(0,s.jsx)("div",{className:"w-20 h-8 bg-gray-700 rounded animate-pulse"}),(0,s.jsx)("div",{className:"w-16 h-8 bg-gray-700 rounded animate-pulse"})]})]})})}),(0,s.jsxs)("div",{className:"flex flex-col xl:flex-row gap-4 sm:gap-6 p-4 sm:p-6 pt-20",children:[(0,s.jsxs)("div",{className:"flex-1 xl:w-2/3",children:[(0,s.jsx)("div",{className:"text-center mb-6",children:(0,s.jsx)("div",{className:"w-32 h-8 bg-gray-700 rounded animate-pulse mx-auto"})}),(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-2 2xl:grid-cols-3 gap-3 sm:gap-4",children:Array.from({length:6}).map((e,r)=>(0,s.jsx)(_,{},r))})]}),(0,s.jsxs)("div",{className:"xl:w-1/3 xl:border-l xl:border-gray-700 xl:pl-6",children:[(0,s.jsx)("div",{className:"text-center mb-4",children:(0,s.jsx)("div",{className:"w-32 h-6 bg-gray-700 rounded animate-pulse mx-auto"})}),(0,s.jsx)("div",{className:"space-y-2",children:Array.from({length:3}).map((e,r)=>(0,s.jsx)("div",{className:"bg-gray-800 border border-gray-600 rounded-lg p-3",children:(0,s.jsx)("div",{className:"w-full h-16 bg-gray-700 rounded animate-pulse"})},r))})]})]})]});if(!i?.is_staff&&!i?.is_admin)return(0,s.jsx)("div",{className:"min-h-screen bg-darkBg flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-neonPink text-xl",children:"Access Denied"}),(0,s.jsx)("p",{className:"text-gray-400",children:"Staff privileges required"})]})});if(V){let e,r,t,a,l;return(0,s.jsx)(O,{children:(l="today"===I?(r=new Date((e=new Date).setHours(0,0,0,0)),t=new Date(e.setHours(23,59,59,999)),C.filter(e=>{let s=new Date(e.created_at||0);return s>=r&&s<=t}).sort((e,s)=>{let r=new Date(e.created_at||0).getTime();return new Date(s.created_at||0).getTime()-r})):(a=new Date(new Date().getTime()-6048e5),C.filter(e=>new Date(e.created_at||0)>=a).sort((e,s)=>{let r=new Date(e.created_at||0).getTime();return new Date(s.created_at||0).getTime()-r})),(0,s.jsxs)("div",{className:"min-h-screen bg-darkBg text-neonText",children:[(0,s.jsx)("div",{className:"bg-gray-900/95 backdrop-blur-md border-b border-gray-700/50 sticky top-0 z-50",children:(0,s.jsx)("div",{className:"max-w-full px-4 py-3",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)(o.Button,{onClick:()=>E(!1),variant:"outline",className:"border-gray-600 text-gray-300 hover:bg-gray-700",children:[(0,s.jsx)(j.ArrowLeft,{className:"w-4 h-4 mr-2"}),"Back to Kitchen"]}),(0,s.jsxs)("h1",{className:"text-2xl font-bold text-white",children:["📋 All Orders ","today"===I?"Today":"This Week"]}),(0,s.jsxs)(m.Badge,{className:"bg-purple-600/20 text-purple-300 border-purple-600/50",children:[l.length," orders"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("div",{className:"flex bg-gray-800 rounded-lg p-1",children:[(0,s.jsx)(o.Button,{onClick:()=>K("today"),variant:"today"===I?"default":"ghost",size:"sm",className:`text-xs px-3 py-1 ${"today"===I?"bg-blue-600 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"}`,children:"Today"}),(0,s.jsx)(o.Button,{onClick:()=>K("week"),variant:"week"===I?"default":"ghost",size:"sm",className:`text-xs px-3 py-1 ${"week"===I?"bg-blue-600 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"}`,children:"This Week"})]}),(0,s.jsx)("div",{className:"text-sm text-gray-400",children:"today"===I?new Date().toLocaleDateString("en-ZA",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"Past 7 days"}),(0,s.jsxs)(o.Button,{onClick:W,disabled:S,variant:"outline",className:"border-gray-600 text-gray-300 hover:bg-gray-700",children:[(0,s.jsx)(h.RefreshCw,{className:`w-4 h-4 mr-2 ${S?"animate-spin":""}`}),"Refresh"]})]})]})})}),(0,s.jsx)("div",{className:"p-6",children:0===l.length?(0,s.jsxs)("div",{className:"text-center py-16",children:[(0,s.jsx)(N.Calendar,{className:"h-16 w-16 mx-auto mb-6 text-gray-400 opacity-50"}),(0,s.jsxs)("h3",{className:"text-xl text-gray-400 mb-2",children:["No Orders ","today"===I?"Today":"This Week"]}),(0,s.jsx)("p",{className:"text-gray-500",children:"Orders will appear here as they come in"})]}):(0,s.jsx)("div",{className:"grid gap-4",children:l.map(e=>(0,s.jsxs)("div",{className:"bg-gray-800 border border-gray-600 rounded-lg p-4 hover:border-gray-500 transition-colors",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-white",children:["Order #",e.order_number||e.id.slice(0,8)]}),(0,s.jsxs)("p",{className:"text-sm text-gray-400",children:[Q(e.created_at)," • ",e.profiles?.full_name||e.profiles?.email?.split("@")[0]||"Walk-in"]})]}),(0,s.jsx)(m.Badge,{className:`${Y(e.status)} px-3 py-1`,children:e.status||"pending"}),(0,s.jsx)(m.Badge,{className:`px-3 py-1 ${"delivery"===e.delivery_method?"bg-blue-600/20 border-blue-600/50 text-blue-300":"bg-green-600/20 border-green-600/50 text-green-300"}`,children:"delivery"===e.delivery_method?"Delivery":"Pickup"})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("p",{className:"text-lg font-semibold text-white",children:["R",e.total_amount?.toFixed(2)||"0.00"]}),(0,s.jsxs)("p",{className:"text-sm text-gray-400",children:[e.order_items?.length||0," items"]})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("p",{className:"text-sm text-gray-300 mb-2",children:["Items: ",e.order_items?.slice(0,3).map(e=>`${e.quantity}x ${e.menu_items?.name||"Item"}`).join(", "),e.order_items&&e.order_items.length>3&&` +${e.order_items.length-3} more`]}),e.special_instructions&&(0,s.jsxs)("p",{className:"text-xs text-yellow-400 italic",children:["Note: ",e.special_instructions]})]}),(0,s.jsx)(o.Button,{onClick:()=>G(e),variant:"outline",size:"sm",className:"bg-transparent border border-blue-500 text-blue-400 hover:bg-blue-600 hover:text-white",children:"View Details"})]})]},e.id))})})]}))})}return(0,s.jsx)(O,{showDetails:!1,children:(0,s.jsxs)("div",{className:"h-screen bg-darkBg text-neonText overflow-hidden",children:[(0,s.jsx)("div",{className:"bg-gray-900/95 backdrop-blur-md border-b border-gray-700/50 fixed top-0 left-0 right-0 z-50",children:(0,s.jsx)("div",{className:"max-w-full px-3 sm:px-4 py-2 sm:py-3",children:(0,s.jsxs)("div",{className:"flex justify-between items-center gap-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0",children:[(0,s.jsxs)("h1",{className:"text-lg sm:text-2xl font-bold text-white truncate",children:[(0,s.jsx)("span",{className:"hidden xs:inline",children:"🍳 Kitchen View"}),(0,s.jsx)("span",{className:"xs:hidden",children:"🍳 Kitchen"})]}),P>0&&(0,s.jsxs)(m.Badge,{className:"bg-red-500 text-white animate-pulse text-xs",children:["+",P]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2 md:gap-3",children:[A&&(0,s.jsx)("div",{className:"text-xs text-gray-400 hidden md:block",children:A.toLocaleTimeString()}),(0,s.jsxs)(o.Button,{onClick:J,variant:"outline",size:"sm",className:"bg-transparent border border-purple-500 text-purple-400 hover:bg-purple-600 hover:text-white hover:border-purple-600 text-xs sm:text-sm font-medium transition-all duration-300 px-2 sm:px-3",children:[(0,s.jsx)("span",{className:"hidden sm:inline",children:"📋 All Orders"}),(0,s.jsx)("span",{className:"sm:hidden",children:"📋"})]}),(0,s.jsx)(o.Button,{variant:"ghost",size:"sm",className:"text-gray-300 p-1 sm:p-2 hidden xs:block",title:"Sound notifications are active",children:(0,s.jsx)(v,{className:"w-4 h-4 sm:w-5 sm:h-5 text-green-400"})}),(0,s.jsxs)(o.Button,{onClick:W,disabled:S,variant:"outline",size:"sm",className:"border-gray-600 text-gray-300 hover:bg-gray-700 text-xs px-2 sm:px-3",children:[(0,s.jsx)(h.RefreshCw,{className:`w-3 h-3 sm:w-4 sm:h-4 ${S?"animate-spin":""}`}),(0,s.jsx)("span",{className:"hidden sm:inline ml-2",children:"Refresh"})]}),(0,s.jsxs)(o.Button,{onClick:async()=>{try{let{getSupabaseClient:s}=await e.A(9553),r=s();await r.auth.signOut(),localStorage.clear(),sessionStorage.clear(),y.push("/"),B.default.success("Logged out successfully")}catch(e){console.error("Logout error:",e),B.default.error("Failed to logout")}},variant:"outline",size:"sm",className:"border-red-600 text-red-400 hover:bg-red-600 hover:text-white text-xs px-2 sm:px-3",children:[(0,s.jsx)("span",{className:"hidden sm:inline",children:"Logout"}),(0,s.jsx)("span",{className:"sm:hidden",children:"⏻"})]})]})]})})}),(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4 sm:gap-6 p-3 sm:p-4 md:p-6 pt-20",children:[(0,s.jsxs)("div",{className:"flex-1 lg:w-2/3",children:[(0,s.jsx)("div",{className:"text-center mb-4 sm:mb-6",children:(0,s.jsx)("h2",{className:"text-xl sm:text-2xl font-bold text-white",children:"Orders"})}),0===ee().length?(0,s.jsxs)("div",{className:"text-center py-12 sm:py-16",children:[(0,s.jsx)(g.ChefHat,{className:"h-12 w-12 sm:h-16 sm:w-16 mx-auto mb-4 sm:mb-6 text-gray-400 opacity-50"}),(0,s.jsx)("h3",{className:"text-lg sm:text-xl text-gray-400 mb-2",children:"No Active Orders"}),(0,s.jsx)("p",{className:"text-gray-500 text-sm",children:"Orders will appear here as they come in"})]}):(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 gap-3 sm:gap-4",children:ee().map((e,r)=>{var t;return(0,s.jsxs)("div",{className:"group relative border rounded-lg p-3 sm:p-4 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 bg-black border-gray-700",style:{minHeight:`${200+(e.order_items?.length>3?(e.order_items.length-3)*15:0)+30*!!e.special_instructions+15*((e.profiles?.full_name||"").length>20)}px`},children:[X(e)&&(0,s.jsx)("div",{className:"absolute -top-2 -right-2 w-5 h-5 sm:w-6 sm:h-6 bg-red-500 text-white rounded-full flex items-center justify-center text-xs font-bold animate-pulse",children:"!"}),(0,s.jsx)("div",{className:`absolute -top-2 -left-2 w-6 h-6 sm:w-8 sm:h-8 ${X(e)?"bg-red-600":"bg-red-500"} text-white rounded-full flex items-center justify-center text-xs sm:text-sm font-bold shadow-lg`,children:r+1}),(0,s.jsxs)("div",{className:"flex justify-between items-start mb-3 mt-2",children:[(0,s.jsxs)("div",{className:"text-white min-w-0 flex-1",children:[(0,s.jsxs)("h4",{className:"font-bold text-sm sm:text-lg leading-tight truncate",children:["Order #",e.order_number||e.id.slice(0,8)]}),(0,s.jsx)("p",{className:"text-xs text-gray-300",children:Q(e.created_at)})]}),(0,s.jsxs)(m.Badge,{className:`${Y(e.status)} text-xs px-2 py-1 flex items-center gap-1 font-medium ml-2 shrink-0`,children:[(e=>{switch(e){case"draft":return(0,s.jsx)(u.Clock,{className:"w-4 h-4"});case"ready":return(0,s.jsx)(p.Package,{className:"w-4 h-4"});case"completed":return(0,s.jsx)(b.CheckCircle,{className:"w-4 h-4"});default:return(0,s.jsx)(f,{className:"w-4 h-4"})}})(e.status),(0,s.jsx)("span",{className:"hidden sm:inline",children:e.status||"pending"})]})]}),(0,s.jsxs)("div",{className:"mb-3 text-white",children:[(0,s.jsx)("p",{className:"text-xs sm:text-sm font-medium truncate",children:e.profiles?.full_name||e.profiles?.email?.split("@")[0]||"Walk-in Customer"}),(0,s.jsxs)("p",{className:"text-xs text-gray-300",children:["Total: R",e.total_amount?.toFixed(2)||"0.00"]})]}),(0,s.jsxs)("div",{className:"mb-4 flex-1",children:[(0,s.jsx)("div",{className:"space-y-1 max-h-16 sm:max-h-24 overflow-y-auto",children:e.order_items.map((e,r)=>(0,s.jsxs)("div",{className:"text-xs sm:text-sm text-white",children:[(0,s.jsxs)("span",{className:"font-medium",children:[e.quantity,"x"]})," ",(0,s.jsx)("span",{className:"text-gray-200 truncate",children:e.menu_items?.name||"Unknown Item"}),e.special_instructions&&(0,s.jsxs)("p",{className:"text-xs text-gray-300 italic ml-4 truncate",children:["Note: ",e.special_instructions]})]},r))}),e.special_instructions&&(0,s.jsxs)("div",{className:"mt-2 p-2 bg-gray-800 rounded text-xs text-gray-200",children:[(0,s.jsx)("strong",{children:"Special:"})," ",(0,s.jsx)("span",{className:"truncate",children:e.special_instructions})]})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("div",{className:"grid grid-cols-2 gap-1",children:(t=e.status,[{label:"New Order",value:"draft",icon:"📝",bgColor:"bg-neonCyan/20 border-neonCyan/50",textColor:"text-neonCyan",hoverColor:"hover:bg-neonCyan/30"},{label:"Ready",value:"ready",icon:"✅",bgColor:"bg-emerald-400/20 border-emerald-400/50",textColor:"text-emerald-300",hoverColor:"hover:bg-emerald-400/30"},{label:"Completed",value:"completed",icon:"🎉",bgColor:"bg-purple-400/20 border-purple-400/50",textColor:"text-purple-300",hoverColor:"hover:bg-purple-400/30"}].map(e=>({...e,isActive:t===e.value,isClickable:(e=>{switch(e){case"draft":return["ready"];case"ready":return["completed"];case"completed":return[];default:return["draft","ready"]}})(t).includes(e.value)}))).map((r,t)=>(0,s.jsxs)(o.Button,{onClick:()=>r.isClickable?Z(e.id,r.value):void 0,disabled:!r.isClickable&&!r.isActive,className:`
                            text-xs py-1.5 font-medium transition-all duration-300 border
                            ${r.isActive?"bg-blue-600 text-white border-blue-600 shadow-lg":r.isClickable?"bg-transparent border-blue-500 text-blue-400 hover:bg-blue-600 hover:text-white hover:border-blue-600":"bg-gray-800 border-gray-600 text-gray-500 cursor-not-allowed"}
                          `,children:[(0,s.jsx)("span",{className:"text-xs mr-1",children:r.icon}),(0,s.jsx)("span",{className:"hidden sm:inline",children:r.label})]},t))}),(0,s.jsxs)(o.Button,{onClick:()=>G(e),variant:"outline",className:"w-full bg-transparent border border-blue-500 text-blue-400 hover:bg-blue-600 hover:text-white hover:border-blue-600 text-xs py-1.5 font-medium transition-all duration-300",children:["👁️ ",(0,s.jsx)("span",{className:"hidden sm:inline",children:"View Details"}),(0,s.jsx)("span",{className:"sm:hidden",children:"Details"})]})]})]},e.id)})})]}),(0,s.jsxs)("div",{className:"lg:w-1/3 lg:border-l lg:border-gray-700 lg:pl-6",children:[(0,s.jsx)("div",{className:"text-center mb-4",children:(0,s.jsx)("h2",{className:"text-lg sm:text-xl font-bold text-white",children:"Ready Orders"})}),0===es().length?(0,s.jsxs)("div",{className:"text-center py-6 sm:py-8",children:[(0,s.jsx)(b.CheckCircle,{className:"h-10 w-10 sm:h-12 sm:w-12 mx-auto mb-4 text-gray-500"}),(0,s.jsx)("p",{className:"text-gray-400 text-sm",children:"No orders ready"}),(0,s.jsx)("p",{className:"text-gray-500 text-xs",children:"Ready orders appear here"})]}):(0,s.jsx)("div",{className:"space-y-2 max-h-[400px] lg:max-h-[calc(100vh-250px)] overflow-y-auto",children:es().map(e=>(0,s.jsx)("div",{className:"bg-gray-800 border border-gray-600 rounded-lg p-3 hover:border-gray-500 transition-colors",children:(0,s.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[(0,s.jsxs)("div",{className:"min-w-0",children:[(0,s.jsxs)("h4",{className:"font-bold text-white text-sm truncate",children:["#",e.order_number||e.id.slice(0,8)]}),(0,s.jsx)("p",{className:"text-xs text-gray-400 truncate",children:e.profiles?.full_name||e.profiles?.email?.split("@")[0]||"Walk-in"})]}),(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,s.jsxs)("p",{className:"text-xs text-gray-300 truncate",children:[e.order_items.slice(0,2).map(e=>`${e.quantity}x ${e.menu_items?.name||"Item"}`).join(", "),e.order_items.length>2&&` +${e.order_items.length-2}`]}),(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:["R",e.total_amount?.toFixed(2)||"0.00"," • ",Q(e.updated_at||e.created_at)]})]}),(0,s.jsx)(m.Badge,{className:`text-xs shrink-0 px-2 py-1 ${"delivery"===e.delivery_method?"bg-blue-600/20 border-blue-600/50 text-blue-300":"bg-green-600/20 border-green-600/50 text-green-300"}`,children:"delivery"===e.delivery_method?"Delivery":"Pickup"})]}),(0,s.jsxs)("div",{className:"flex gap-2 shrink-0",children:[(0,s.jsx)(o.Button,{onClick:()=>G(e),variant:"outline",size:"sm",className:"bg-transparent border border-gray-600 text-gray-400 hover:bg-gray-700 hover:text-white text-xs px-3 py-1",children:"👁️"}),(0,s.jsx)(o.Button,{onClick:()=>Z(e.id,"completed"),size:"sm",className:"bg-green-600 hover:bg-green-700 text-white text-xs px-3 py-1 font-medium",children:(e.delivery_method,"✅ Complete")})]})]})},e.id))})]})]}),(0,s.jsx)(c.default,{order:F,isOpen:z,onClose:()=>{H(!1),U(null)},hideTechnicalDetails:!0})]})})}e.s(["default",()=>M],191471)},9553,e=>{e.v(e=>Promise.resolve().then(()=>e(390676)))}]);

//# debugId=f1b8222e-f922-8753-59f0-ddf6d4702402
//# sourceMappingURL=ff9a981e96478004.js.map